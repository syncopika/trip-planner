(function(t){function e(e){for(var i,r,s=e[0],d=e[1],l=e[2],c=0,p=[];c<s.length;c++)r=s[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(t[i]=d[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var d=n[s];0!==o[d]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/trip-planner/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"034f":function(t,e,n){"use strict";n("85ec")},"3b5f":function(t,e,n){},"638d":function(t,e,n){"use strict";n("fa96")},"778d":function(t,e,n){"use strict";n("9470")},"82f8":function(t,e,n){"use strict";n("f687")},"85ec":function(t,e,n){},9470:function(t,e,n){},a8f8:function(t,e,n){"use strict";n("3b5f")},cd49:function(t,e,n){"use strict";n.r(e);n("4de4"),n("d81d"),n("45fc"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("9ab4"),o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("trip-route-map",{attrs:{"list-of-dest":t.listOfDest,"trip-name":t.tripName,"list-of-trip-names":t.listOfTripNames,suggestedNextDest:t.suggestedNextDest}})],1)},r=[],s=n("60a3"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"main"}},[n("div",{attrs:{id:"column1"}},[t._m(0),n("div",{attrs:{id:"suggestions"}},[n("label",{attrs:{for:"tripSuggestionsOption"}},[t._v(" show suggestions for next dest in trip route? ")]),n("select",{attrs:{id:"tripSuggestionsOption"},on:{change:t.toggleTripSuggestions}},[n("option",{attrs:{value:"yes"}},[t._v(" yes please! ")]),n("option",{attrs:{selected:"",value:"no"}},[t._v(" no thanks ")])]),t.showSuggestedNextHops?n("div",[n("h3",[t._v(" check out these suggestions! ")]),n("ul",t._l(t.suggestedNextDest,(function(e,i){return n("li",{key:"li_nextDest_"+i},[n("p",[t._v(t._s(e))])])})),0)]):t._e()])]),n("div",{attrs:{id:"column2"}},[n("navigation",{attrs:{"list-of-trip-names":t.listOfTripNames}}),n("div",{attrs:{id:"tripInfo"}},[n("h1",{staticClass:"tripTitle"},[t._v(t._s(t.tripName))]),n("destinationList",{attrs:{"list-of-dest":t.listOfDest}})],1),t._m(1)],1)])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[n("iframe",{attrs:{id:"mapContainer",src:"./mapIframe.html"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"footer"}},[n("p",[t._v(" footer ")])])}],u=(n("caad"),n("2532"),n("498a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{attrs:{id:"stops"}},t._l(t.listOfDest,(function(t){return n("destination",{key:t.name+t.latitude+t.longitude,attrs:{destination:t}})})),1)])}),c=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dest",attrs:{id:t.destination.name+"_dest"},on:{mouseover:t.highlightBorder,mouseleave:t.dehighlightBorder}},[n("h1",{attrs:{id:t.destination.name},on:{click:t.toggleVisibility}},[t._v(" "+t._s(t.destination.name)+" ")]),n("p",{staticClass:"delete",attrs:{id:t.destination.name+"_delete"},on:{click:t.removeDestination}},[t._v(" x ")]),n("div",{staticClass:"content",attrs:{id:t.destination.name+"_content"}},[n("div",{attrs:{id:t.destination.name+"_dates"}},[n("div",{staticClass:"row"},[n("Calendar",{ref:t.destination.name+"_fromDate",attrs:{"dest-name":t.destination.name+"_from_",date:t.destination.fromDate,"is-editing":t.isEditing,header:"to"}})],1),n("div",{staticClass:"row"},[n("Calendar",{ref:t.destination.name+"_toDate",attrs:{"dest-name":t.destination.name+"_to_",date:t.destination.toDate,"is-editing":t.isEditing,header:"from"}})],1)]),n("h3",[t._v(" notes: ")]),n("div",[n("textarea",{attrs:{id:t.destination.name+"_notes",rows:"5",cols:"50",disabled:""},domProps:{value:t.destination.notes}}),n("br")]),n("br"),n("h3",[t._v(" images: ")]),n("div",{attrs:{id:t.destination.name+"_images"}},t._l(t.destination.images,(function(e,i){return n("div",{key:"div_"+t.destination.name+"_image_"+i,staticClass:"imageContainer",staticStyle:{"margin-right":"2px"}},[n("img",{key:t.destination.name+"_image_"+i,attrs:{src:e},on:{mouseover:function(t){t.target.style.border="1px solid #e0ffff"},mouseout:function(t){t.target.style.border="1px solid #000"},dblclick:function(e){return t.enlargeImage(e)}}}),t.isEditing?n("h3",{staticStyle:{color:"red"},attrs:{id:"delete_"+t.destination.name+"_image_"+i},on:{click:function(e){return t.deleteImage(e)}}},[t._v(" x ")]):t._e()])})),0),n("br"),t.isEditing?n("div",{staticStyle:{"text-align":"left"},attrs:{id:t.destination.name+"_editRouteColor"}},[n("label",{attrs:{for:t.destination.name+"_routeColor"}},[t._v(" route color: ")]),n("input",{style:"background-color: "+t.destination.routeColor,attrs:{id:t.destination.name+"_routeColor",name:t.destination.name+"_routeColor",type:"text",size:"7"},domProps:{value:t.destination.routeColor}}),n("button",{staticStyle:{display:"inline-block"},attrs:{id:t.destination.name+"_routeColor_btn"},on:{click:t.showColorWheel}},[t._v(" show color wheel ")])]):t._e(),t.isEditing?t._e():n("h3",[t._v(" route color: "),n("span",{style:"background-color: "+t.destination.routeColor},[t._v(t._s(t.destination.routeColor))])]),n("hr"),n("p",{staticClass:"latlng"},[t._v(" lat: "+t._s(t.destination.latitude)+", long: "+t._s(t.destination.longitude)+" ")]),t.isEditing?t._e():n("button",{on:{click:t.toggleEdit}},[t._v(" edit ")]),n("input",{staticClass:"inputFile",attrs:{type:"file",accept:"image/*",id:t.destination.name+"_importImage"},on:{change:t.uploadImage}}),t.isEditing?n("button",{on:{click:t.clickInput}},[t._v(" upload image ")]):t._e(),t.isEditing?n("button",{staticClass:"editButton",on:{click:t.saveChanges}},[t._v(" save ")]):t._e(),t.isEditing?n("button",{staticClass:"editButton",on:{click:t.cancelChanges}},[t._v(" cancel ")]):t._e()])])},m=[],h=(n("cb29"),n("a434"),n("ac1f"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isEditing?n("div",{staticClass:"calendar"},[n("p",[t._v(" "+t._s(t.header)+": ")]),n("input",{attrs:{id:t.destName+"month",type:"text",size:"2",maxlength:"2",placeholder:"mm"}}),n("p",[t._v(" / ")]),n("input",{attrs:{id:t.destName+"day",type:"text",size:"2",maxlength:"2",placeholder:"dd"}}),n("p",[t._v(" / ")]),n("input",{attrs:{id:t.destName+"year",type:"text",size:"4",maxlength:"4",placeholder:"yyyy"}})]):t._e(),t.isEditing?t._e():n("div",{staticClass:"calendar"},[n("h3",[t._v(t._s(t.header)+": "+t._s(2===t.date.length?"":t.date.replaceAll("-","/"))+" ")])])])}),f=[],g=o["a"].extend({data:function(){return{}},props:{destName:{required:!0,type:String},isEditing:{required:!0,type:Boolean},date:{required:!0,type:String},header:{required:!0,type:String}},methods:{getDateInfo:function(){var t=this.destName,e=document.getElementById(t+"month"),n=document.getElementById(t+"day"),i=document.getElementById(t+"year");return{month:e.value,day:n.value,year:i.value}}},updated:function(){if(this.date&&this.isEditing){var t=this.date.split("-"),e=this.destName,n=document.getElementById(e+"month"),i=document.getElementById(e+"day"),o=document.getElementById(e+"year");n&&t.length>0&&(n.value=t[0]),i&&t.length>1&&(i.value=t[1]),o&&t.length>2&&(o.value=t[2])}}}),v=g,y=(n("a8f8"),n("2877")),b=Object(y["a"])(v,h,f,!1,null,"412472fb",null),_=b.exports,x=function(){function t(){this.modalStyle={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"1010",textAlign:"center",padding:"8px",backgroundColor:"#fff",width:"20%",height:"auto",boxShadow:"2px 2px 5px #ccc"},this.modalOverlayStyle={zIndex:"1000",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#aaa",opacity:"0.2"}}return t.prototype.createInputModal=function(t){var e=document.createElement("div");e.id="modal",Object.assign(e.style,this.modalStyle);var n=document.createElement("p");n.textContent=t,n.style.marginBottom="0px";var i=document.createElement("input");i.type="text",e.appendChild(n),e.appendChild(document.createElement("br")),e.appendChild(i);var o=document.createElement("button");o.innerText="submit";var a=document.createElement("button");a.innerText="cancel",e.appendChild(document.createElement("br")),e.appendChild(document.createElement("br")),e.appendChild(o),e.appendChild(a);var r=document.createElement("div");return r.id="modal-overlay",Object.assign(r.style,this.modalOverlayStyle),document.body.appendChild(e),document.body.appendChild(r),new Promise((function(t,e){o.onclick=function(){var e=i.value.trim();t(e)},a.onclick=function(){t(void 0)}})).finally((function(){document.body.removeChild(e),document.body.removeChild(r)}))},t.prototype.createMessageModal=function(t){var e=document.createElement("div");e.id="modal",Object.assign(e.style,this.modalStyle);var n=document.createElement("p");n.textContent=t,e.appendChild(n);var i=document.createElement("button");i.innerText="ok",e.appendChild(i);var o=document.createElement("div");return o.id="modal-overlay",Object.assign(o.style,this.modalOverlayStyle),document.body.appendChild(e),document.body.appendChild(o),new Promise((function(t){i.onclick=function(){t(!0)}})).finally((function(){document.body.removeChild(e),document.body.removeChild(o)}))},t.prototype.createQuestionModal=function(t){var e=document.createElement("div");e.id="modal",Object.assign(e.style,this.modalStyle);var n=document.createElement("p");n.textContent=t,e.appendChild(n);var i=document.createElement("button");i.innerText="ok";var o=document.createElement("button");o.innerText="cancel",e.appendChild(i),e.appendChild(o);var a=document.createElement("div");return a.id="modal-overlay",Object.assign(a.style,this.modalOverlayStyle),document.body.appendChild(e),document.body.appendChild(a),new Promise((function(t){i.onclick=function(){t(!0)},o.onclick=function(){t(!1)}})).finally((function(){document.body.removeChild(e),document.body.removeChild(a)}))},t}(),D=o["a"].extend({data:function(){return{expanded:!1,isEditing:!1,editSnapshot:{},currDestTitle:""}},components:{Calendar:_},props:{destination:{required:!0,type:Object}},methods:{highlightBorder:function(){var t=this.destination.name,e=document.getElementById(t+"_dest");null!==e&&(e.style.border="2px solid #fff")},dehighlightBorder:function(){var t=this.destination.name,e=document.getElementById(t+"_dest");null!==e&&(e.style.border="2px solid #000")},toggleVisibility:function(){var t=this.destination.name,e=document.getElementById(t+"_content");null!==e&&(this.expanded&&!this.isEditing?e.style.display="none":e.style.display="block"),this.expanded=!this.expanded},toggleEdit:function(t){t.stopPropagation();var e=this.destination.name;this.isEditing=!0,this.editSnapshot=JSON.parse(JSON.stringify(this.destination));var n=document.getElementById(e);null===n||void 0===n||n.setAttribute("contenteditable","true"),this.currDestTitle=(null===n||void 0===n?void 0:n.textContent)||"";var i=document.getElementById(e+"_notes");null!==i&&i.removeAttribute("disabled")},removeDestination:function(t){return Object(i["a"])(this,void 0,Promise,(function(){var e,n,o;return Object(i["d"])(this,(function(i){switch(i.label){case 0:return e=new x,[4,e.createQuestionModal("Are you sure you want to remove this destination?")];case 1:return n=i.sent(),n&&(o=t.target.id.split("_")[0],this.$root.removeDestination(o)),[2]}}))}))},saveChanges:function(){var t,e,n=this.destination.name,i=document.getElementById(n),o=null===(t=null===i||void 0===i?void 0:i.textContent)||void 0===t?void 0:t.trim().split(" ")[0];i&&(i.textContent=this.currDestTitle,i.setAttribute("contenteditable","false"));var a=document.getElementById(n+"_notes");null===a||void 0===a||a.setAttribute("disabled","true");var r=JSON.parse(JSON.stringify(this.destination));r.notes=null===(e=a)||void 0===e?void 0:e.value,r.newName=o;var s=this.$refs[n+"_fromDate"].getDateInfo(),d=this.$refs[n+"_toDate"].getDateInfo();r.fromDate=s.month+"-"+s.day+"-"+s.year,r.toDate=d.month+"-"+d.day+"-"+d.year;var l=document.getElementById(this.destination.name+"_routeColor");l&&(r.routeColor=l.value);var u=document.getElementById(this.destination.name+"_colorWheel");u&&u.parentNode&&u.parentNode.removeChild(u),this.$root.updateDestination(r),this.isEditing=!1},cancelChanges:function(){var t=this.destination.name,e=document.getElementById(t);null===e||void 0===e||e.setAttribute("contenteditable","false");var n=document.getElementById(t+"_notes");null===n||void 0===n||n.setAttribute("disabled","true");var i=JSON.parse(JSON.stringify(this.editSnapshot));for(var o in i)this.destination[o]=i[o];this.editSnapshot={},this.isEditing=!1},uploadImage:function(t){var e=this,n=new Image,i=new FileReader,o=t.target.files[0];i.onloadend=function(){var t=i.result;n.src=t;var o=JSON.parse(JSON.stringify(e.destination));o.images.push(t),e.$root.updateDestination(o)},i.readAsDataURL(o)},clickInput:function(){var t=document.getElementById(this.destination.name+"_importImage");null===t||void 0===t||t.click()},enlargeImage:function(t){var e=document.createElement("div");e.style.opacity="0.98",e.style.backgroundColor="#383838",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.textAlign="center",e.style.overflow="scroll",document.body.style.overflow="hidden";var n=new Image;n.src=t.target.src,n.addEventListener("dblclick",(function(){var t;null===(t=null===e||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(e),document.body.style.overflow="visible"})),document.body.clientHeight<n.height||(document.body.clientWidth,n.width),e.appendChild(n);var i=document.createElement("h3");i.textContent="close",i.style.fontFamily="Montserrat",i.style.fontWeight="bold",i.style.fontSize="2em",i.style.color="#fff",i.style.marginTop="1%",i.addEventListener("click",(function(){var t;null===(t=null===e||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(e),document.body.style.overflow="visible"})),e.appendChild(i),document.body.appendChild(e)},deleteImage:function(t){var e=t.target.id.split("_");e=parseInt(e[e.length-1]),this.destination.images.splice(e,1)},showColorWheel:function(){var t=this,e=document.getElementById(this.destination.name+"_editRouteColor"),n=this.destination.name+"_colorWheel";if(!document.getElementById(n)){var i="200",o=document.createElement("canvas");o.id=n,o.setAttribute("width",i),o.setAttribute("height",i);var a=o.getContext("2d"),r=o.width/2,s=o.height/2,d=90;if(a){for(var l=0;l<=5600;l++){var u=(l-2)*Math.PI/180,c=l*Math.PI/180;a.beginPath(),a.moveTo(r,s),a.arc(r,s,d,u,c,!1),a.closePath();var p=a.createRadialGradient(r,s,0,u,c,d);p.addColorStop(0,"hsla("+l+", 10%, 100%, 1)"),p.addColorStop(1,"hsla("+l+", 100%, 50%, 1)"),a.fillStyle=p,a.fill()}a.fillStyle="#000",a.beginPath(),a.arc(10,10,8,0,2*Math.PI),a.fill(),a.beginPath(),a.arc(30,10,8,0,2*Math.PI),a.stroke(),a.fillStyle="#fff",a.arc(30,10,8,0,2*Math.PI),a.fill(),o.addEventListener("click",(function(e){var n=e.offsetX,i=e.offsetY,a=o.getContext("2d").getImageData(n,i,1,1).data,r="rgb("+a[0]+","+a[1]+","+a[2]+")",s=document.getElementById(t.destination.name+"_routeColor");s&&(s.value=r,s.style.backgroundColor=r)}))}e&&e.appendChild(o)}}}}),O=D,C=(n("82f8"),Object(y["a"])(O,p,m,!1,null,"b1186448",null)),N=C.exports,E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["c"])(e,t),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"listOfDest",void 0),e=Object(i["b"])([Object(s["a"])({components:{Destination:N}})],e),e}(s["c"]),w=E,I=w,S=Object(y["a"])(I,u,c,!1,null,null,null),j=S.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menuHeader"}},[n("h2",[t._v(" trip-planner ")]),n("ul",[n("li",{staticClass:"selectOption",attrs:{id:"createNewTrip"},on:{click:t.addNewTrip}},[t._v(" new trip ")]),n("li",[t._v(" • ")]),n("li",{staticClass:"dropdown"},[n("p",{staticClass:"dropbtn"},[t._v(" select trip ")]),n("div",{staticClass:"dropContent"},t._l(t.listOfTripNames,(function(e,i){return n("a",{key:e+"_"+i,attrs:{href:"#",id:"tripIndex_"+i},on:{click:t.selectTrip}},[t._v(" "+t._s(e)+" ")])})),0)]),n("li",[t._v(" • ")]),n("li",{staticClass:"selectOption",on:{click:t.triggerImport}},[t._v(" import ")]),n("input",{attrs:{type:"file",id:"importTripData"},on:{change:t.importData}}),n("li",[t._v(" • ")]),n("li",{staticClass:"selectOption",on:{click:t.exportData}},[t._v(" export ")])])])},k=[],M={props:{listOfTripNames:{required:!0,type:Array}},methods:{addNewTrip:function(){return Object(i["a"])(this,void 0,Promise,(function(){var t,e;return Object(i["d"])(this,(function(n){switch(n.label){case 0:return t=new x,[4,t.createInputModal("please enter the name of the new trip:")];case 1:return e=n.sent(),e&&this.$root.addNewTrip(e),[2]}}))}))},selectTrip:function(t){if(t){var e=parseInt(t.target.id.split("_")[1]);this.$root.selectTrip(e)}},triggerImport:function(){var t=document.getElementById("importTripData");null===t||void 0===t||t.click()},importData:function(t){this.$root.importData(t)},exportData:function(){this.$root.exportData()},saveData:function(){}}},B=M,P=(n("638d"),Object(y["a"])(B,T,k,!1,null,"1a5e564a",null)),q=P.exports,$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showSuggestedNextHops=!1,e}return Object(i["c"])(e,t),e.prototype.onDestChange=function(t,e){this.updateMap(t),this.showSuggestedNextHops&&this.updateSuggestedNextHops(this.suggestedNextDest)},e.prototype.dispatchEventToMap=function(t,e){var n=new CustomEvent(t,{detail:e}),i=document.getElementById("mapContainer");null!==i&&null!==i.contentDocument&&i.contentDocument.dispatchEvent(n)},e.prototype.updateMap=function(t){this.dispatchEventToMap("updateMap",t)},e.prototype.updateSuggestedNextHops=function(t){this.dispatchEventToMap("updateSuggestedNextHops",t)},e.prototype.toggleTripSuggestions=function(){this.showSuggestedNextHops=!this.showSuggestedNextHops,this.showSuggestedNextHops?this.updateSuggestedNextHops(this.suggestedNextDest):this.updateSuggestedNextHops([])},e.prototype.toggleTripTitleEdit=function(t){return Object(i["a"])(this,void 0,Promise,(function(){var e,n;return Object(i["d"])(this,(function(i){return t.target.classList.contains("tripTitle")?t.target.setAttribute("contenteditable","true"):(e=document.querySelector(".tripTitle"),e&&(n=e.textContent.trim(),n!==this.tripName&&this.listOfTripNames.includes(n)?e.textContent=this.tripName:this.$root.updateTripName(n),e.setAttribute("contenteditable","false"))),[2]}))}))},e.prototype._handleIframeLogs=function(t){console.log(t)},e.prototype._handleReady=function(){console.log("got iframe ready message!!"),this.updateMap(this.listOfDest),this.showSuggestedNextHops&&this.updateSuggestedNextHops(this.suggestedNextDest)},e.prototype.mounted=function(){window.document.addEventListener("imready",this._handleReady,!1),window.document.addEventListener("iframeLogs",this._handleIframeLogs,!1),window.document.addEventListener("click",this.toggleTripTitleEdit)},Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"listOfDest",void 0),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"listOfTripNames",void 0),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"tripName",void 0),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"suggestedNextDest",void 0),Object(i["b"])([Object(s["d"])("listOfDest",{deep:!0})],e.prototype,"onDestChange",null),e=Object(i["b"])([Object(s["a"])({components:{DestinationList:j,Navigation:q}})],e),e}(s["c"]),H=$,A=H,L=(n("778d"),Object(y["a"])(A,d,l,!1,null,null,null)),J=L.exports,R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["c"])(e,t),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"listOfDest",void 0),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"tripName",void 0),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"listOfTripNames",void 0),Object(i["b"])([Object(s["b"])({required:!0})],e.prototype,"suggestedNextDest",void 0),e=Object(i["b"])([Object(s["a"])({components:{TripRouteMap:J}})],e),e}(s["c"]),F=R,z=F,W=(n("034f"),Object(y["a"])(z,a,r,!1,null,null,null)),G=W.exports,U=n("bc3a"),Q=n.n(U);o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(G,{props:{listOfDest:this.tripData[this.currTripIndex].listOfDest,tripName:this.tripData[this.currTripIndex].tripName,listOfTripNames:this.tripData.map((function(t){return t.tripName})),suggestedNextDest:this.suggestedNextDest}})},data:{tripData:[{tripName:"my first trip",listOfDest:[{name:"test",latitude:38.9486650738765,longitude:-77.01459411621002,notes:"hello world",fromDate:"01-01-2020",toDate:"01-05-2020",images:[],routeColor:"#888"},{name:"test2",latitude:38.982833520960156,longitude:-76.95210937499908,notes:"hello world2",fromDate:"01-05-2020",toDate:"01-07-2020",images:[],routeColor:"#888"}]}],currTripIndex:0,suggestedNextDest:[],canGetSuggestedNextDest:!1,fakeSuggestions:[{username:"test_user1",destname:"test_place1",tripname:"test_trip1",latitude:39.00283352096016,longitude:-76.55210937499908,index:0,metadata:{notes:"hello world2 sdfsdf",fromDate:"01-05-2020",toDate:"01-07-2020",images:[],routeColor:"#888"}},{username:"test_user1",destname:"test_place2",tripname:"test_trip1",latitude:39.048987979347004,longitude:-76.91640380859292,index:1,metadata:{notes:"hello world2 sdfsdf sdfgsdfg",fromDate:"01-05-2020",toDate:"01-07-2020",images:[],routeColor:"#888"}},{username:"test_user1",destname:"test_place3",tripname:"test_trip1",latitude:38.848987979347,longitude:-77.01640380859293,index:2,metadata:{notes:"hello world2 sdfsdf sdfgsdfg",fromDate:"01-05-2020",toDate:"01-07-2020",images:[],routeColor:"#888"}},{username:"test_user1",destname:"test_place4",tripname:"test_trip1",latitude:37.948987979347,longitude:-77.01640380859293,index:3,metadata:{notes:"something",fromDate:"01-05-2020",toDate:"01-07-2020",images:[],routeColor:"#888"}}]},methods:{requestSuggestedNextHops:function(t,e){return new Promise((function(n){Q.a.post("http://localhost:8081/api/destinations",{latitude:t,longitude:e,radius:5}).then((function(t){var e=t.data.destinations;n(e)})).catch((function(t){n([])}))}))},findDestination:function(t){var e,n,o=this.tripData[this.currTripIndex].listOfDest;try{for(var a=Object(i["e"])(o),r=a.next();!r.done;r=a.next()){var s=r.value;if(s.name===t)return!0}}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!1},removeDestination:function(t){var e=this.tripData[this.currTripIndex].listOfDest;this.tripData[this.currTripIndex].listOfDest=e.filter((function(e){return e.name!==t})),this.canGetSuggestedNextDest||(this.suggestedNextDest=this.getFakeSuggestions())},updateDestination:function(t){var e=this.tripData[this.currTripIndex].listOfDest,n=t.name,i=!1,o="";if(t.newName){o=t.newName;var a=this.findDestination(o);n===o||a?n!==o&&a&&alert("Can't change name because a destination already exists with the same name!"):i=!0}for(var r=0;r<e.length;r++){var s=e[r];if(s.name===n){s.notes=t.notes,s.fromDate=t.fromDate,s.toDate=t.toDate,s.images=t.images,s.routeColor=t.routeColor,s.name=i?o:n;break}}},updateTripName:function(t){if(!this.tripData.some((function(e){return e.tripName===t}))){var e=this.tripData[this.currTripIndex];e.tripName=t,console.log("trip name updated")}},addNewTrip:function(t){var e={tripName:t,listOfDest:[]};this.tripData.push(e),this.currTripIndex=this.tripData.length-1},selectTrip:function(t){this.currTripIndex=t},importData:function(t){var e=this,n=new FileReader,i=t.target.files[0];i&&(n.onload=function(){return function(t){var n=JSON.parse(t.target.result);n.length&&n[0].tripName&&n[0].listOfDest?(e.tripData.push(n[0]),e.currTripIndex=e.tripData.length-1):alert("sorry, trip data could not be imported! please check the format.")}}(),n.readAsText(i))},exportData:function(){return Object(i["a"])(this,void 0,Promise,(function(){var t,e,n,o,a,r,s,d,l,u,c,p,m,h,f,g,v;return Object(i["d"])(this,(function(y){switch(y.label){case 0:t=JSON.parse(JSON.stringify(this.tripData));try{for(e=Object(i["e"])(t),n=e.next();!n.done;n=e.next()){o=n.value;try{for(g=void 0,a=Object(i["e"])(o.listOfDest),r=a.next();!r.done;r=a.next())s=r.value,s.images=[]}catch(b){g={error:b}}finally{try{r&&!r.done&&(v=a.return)&&v.call(a)}finally{if(g)throw g.error}}}}catch(_){h={error:_}}finally{try{n&&!n.done&&(f=e.return)&&f.call(e)}finally{if(h)throw h.error}}return d=JSON.stringify(t,null,4),l=new Blob([d],{type:"application/json"}),u=URL.createObjectURL(l),c=document.createElement("a"),c.href=u,p=new x,[4,p.createInputModal("What would you like to name the exported file?")];case 1:return m=y.sent(),m&&(c.download=m?m+".json":"trip-planner-data.json",c.click()),[2]}}))}))},getFakeSuggestions:function(){var t=this.tripData[this.currTripIndex].listOfDest,e=t[t.length-1].latitude*Math.PI/180,n=t[t.length-1].longitude*Math.PI/180,i=this.fakeSuggestions.filter((function(t){var i=t.longitude*Math.PI/180,o=t.latitude*Math.PI/180;return 6371*Math.acos(Math.sin(e)*Math.sin(o)+Math.cos(e)*Math.cos(o)*Math.cos(n-i))<=20}));return i}},mounted:function(){var t=this;document.addEventListener("addDest",(function(e){var n=e.detail;if(n){var i={name:n.name,latitude:n.latitude,longitude:n.longitude,toDate:"",fromDate:"",notes:"",images:[],routeColor:"#888"};t.tripData[t.currTripIndex].listOfDest.push(i),t.canGetSuggestedNextDest?t.requestSuggestedNextHops(n.latitude,n.longitude).then((function(e){t.suggestedNextDest=e})):t.suggestedNextDest=t.getFakeSuggestions()}})),Q.a.post("http://localhost:8081/api/userDestinations",{username:"user1"}).then((function(e){t.tripData=e.data.trips,t.canGetSuggestedNextDest=!0;var n=t.tripData[t.currTripIndex].listOfDest,i=n[n.length-1].latitude,o=n[n.length-1].longitude;t.requestSuggestedNextHops(i,o).then((function(e){t.suggestedNextDest=e}))})).catch((function(e){t.suggestedNextDest=t.getFakeSuggestions()}))}}).$mount("#app")},f687:function(t,e,n){},fa96:function(t,e,n){}});
//# sourceMappingURL=app.63711321.js.map