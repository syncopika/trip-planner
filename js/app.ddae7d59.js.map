{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Destination.vue?84cc","webpack:///./src/components/Navigation.vue?9f19","webpack:///./src/components/Calendar.vue?7882","webpack:///./src/App.vue?3a54","webpack:///./src/components/DestinationList.vue?f12c","webpack:///./src/utils/modal.ts","webpack:///./src/components/Destination.vue?6ac4","webpack:///./src/components/Calendar.vue?6f1b","webpack:///./src/components/Calendar.vue","webpack:///./src/components/Calendar.vue?3b63","webpack:///./src/components/Calendar.vue?4d81","webpack:///./src/components/Destination.vue","webpack:///./src/components/Destination.vue?badc","webpack:///./src/components/Destination.vue?b784","webpack:///./src/components/DestinationList.vue","webpack:///./src/components/DestinationList.vue?e457","webpack:///./src/components/DestinationList.vue?d77d","webpack:///./src/components/Navigation.vue?db87","webpack:///./src/components/OptionsModal.vue?b1e7","webpack:///./src/components/OptionsModal.vue","webpack:///./src/components/OptionsModal.vue?ac5b","webpack:///./src/components/OptionsModal.vue?d247","webpack:///./src/components/Navigation.vue","webpack:///./src/components/Navigation.vue?3e2d","webpack:///./src/components/Navigation.vue?8f5e","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts","webpack:///./src/components/OptionsModal.vue?f9e3"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","appearanceOptions","_v","_l","index","_s","staticClass","on","searchLocationWithOverpass","clearSearchResults","showHelpModal","_e","toggleTripSuggestions","nextDest","listOfTripNames","tripName","listOfDest","_m","staticRenderFns","onDrop","$event","preventDefault","destObj","latitude","longitude","staticStyle","addDestinationManually","modalStyle","position","top","left","transform","zIndex","textAlign","padding","backgroundColor","boxShadow","border","overflowY","modalOverlayStyle","width","height","opacity","createInputModal","text","modal","document","createElement","id","assign","style","displayText","textContent","marginBottom","textInput","type","appendChild","submitBtn","innerText","cancelBtn","modalOverlay","body","Promise","resolve","reject","onclick","inputText","trim","undefined","finally","removeChild","createMessageModal","doNotCenterText","forEach","okBtn","createQuestionModal","addNewDestinationModal","inputsDiv","display","gridTemplateColumns","gridGap","destinationName","destinationNameLabel","htmlFor","fontSize","destinationLat","destinationLatLabel","destinationLong","destinationLongLabel","destinationNotes","destinationNotesLabel","parseFloat","notes","isNaN","destination","highlightBorder","dehighlightBorder","onDragStart","toggleVisibility","removeDestination","ref","fromDate","isEditing","toDate","domProps","image","target","enlargeImage","deleteImage","routeColor","showColorWheel","toggleEdit","uploadImage","clickInput","saveChanges","cancelChanges","header","destName","date","replaceAll","extend","props","required","String","Boolean","methods","getDateInfo","month","getElementById","day","year","updated","dateParts","split","component","expanded","editSnapshot","currDestTitle","components","Calendar","dest","content","evt","stopPropagation","JSON","parse","stringify","destTitle","setAttribute","removeAttribute","Modal","remove","$root","newName","$refs","routeColorInput","colorWheel","parentNode","updateDestination","currData","img","Image","reader","FileReader","files","file","onloadend","imgSrcStr","src","images","readAsDataURL","inputElement","click","imageDiv","overflow","enlargedImage","addEventListener","marginTop","clientHeight","clientWidth","cancel","fontFamily","fontWeight","color","imageIndexStr","imageIndex","parseInt","location","colorWheelId","size","colorWheelContext","getContext","x","y","radius","angle","startAngle","Math","PI","endAngle","beginPath","moveTo","arc","closePath","gradient","createRadialGradient","addColorStop","fillStyle","fill","stroke","e","offsetX","offsetY","colorPicked","getImageData","colorCode","colorInput","thisEl","dataTransfer","dropEffect","effectAllowed","setData","DestinationListProps","Array","DestinationList","currDragElementId","getData","currDraggedElementIndex","findIndex","targetElementIndex","destinationData","console","log","addNewDestination","Destination","addNewTrip","selectTrip","triggerImport","importData","exportData","exportCurrTripHTML","showOptionsModal","theme","showLocationLookup","showSuggestedDestinations","overpassApiEntity","nextDestDataSource","handleUpdateOptions","directives","rawName","expression","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","_q","$$selectedVal","filter","options","selected","map","val","_value","selectedOverpassApiEntity","multiple","entity","selectedTheme","updateOptions","$emit","initialTheme","initialShowLocationLookup","initialShowSuggestedDestinations","initialOverpassApiEntity","initialNextDestDataSource","mapType","overpassApiEntities","OptionsModal","modalHandler","newTripName","confirm","importButton","saveData","setOverpassApiUse","updateAppearancePerOptions","TripPlannerAppProps","suggestedNextDests","showSuggestedNextHops","overpassApiKeys","created","$watch","newVal","updateMap","updateSuggestedNextHops","deep","dispatchEventToMap","eventName","updateMapEvent","CustomEvent","detail","mapIframe","contentDocument","dispatchEvent","toggleTripTitleEdit","el","classList","contains","trip","querySelector","editedTripName","includes","updateTripName","locationInput","locationTypeSelect","locationType","selectedIndex","getSearchResultsFromOverpass","then","_handleIframeLogs","_handleReady","mounted","App","Navigation","config","productionTip","render","h","tripData","currTripIndex","requestSuggestedNextHops","lat","long","a","username","res","suggestedNextDestinations","destinations","catch","error","findDestination","currDests","canGetSuggestedNextDests","getFakeSuggestions","currName","changeName","destWithNewNameExists","alert","some","currTrip","newDest","newTrip","tripIndex","onload","readAsText","jsonData","blob","Blob","url","URL","createObjectURL","link","href","filename","download","currTripName","html","tripInfo","currTripDestList","note","join","latLngMatch","match","substring","embeddedMap","tab","open","write","close","newSuggestions","fakeSuggestions","lngRad","latRad","acos","sin","cos","_makeOverpassRequest","query","headers","getResults","responseData","elements","tags","lon","website","tourism","post","response","getLocationsFromOverpass","keyType","searchLocationsFromOverpass","valueToFind","getSuggestionsFromOverpass","useOverpassAPI","overpassApiEntityKeyMap","overpassApiEntityToFind","overpassApiKeyToFind","changeStyleTheme","getCurrentOverpassAPIOptions","overpassEntities","keys","getNextDestSuggestions","changeMapStyle","mapStyleName","themeName","documentElement","setProperty","trips","lng","$mount"],"mappings":"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","file":"js/app.ddae7d59.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/trip-planner/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Destination.vue?vue&type=style&index=0&id=58f3b521&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=style&index=0&id=15aa120a&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=style&index=0&id=7c9ce71d&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"column1\"}},[_c('div',{attrs:{\"id\":\"container\"}},[(_vm.appearanceOptions.showLocationLookup)?_c('div',{attrs:{\"id\":\"searchLocationBar\"}},[_c('label',{attrs:{\"for\":\"nameOfLocation\"}},[_vm._v(\"location name: \")]),_c('input',{attrs:{\"id\":\"nameOfLocation\",\"type\":\"text\"}}),_c('label',{attrs:{\"for\":\"typeOfLocation\"}},[_vm._v(\" type of location: \")]),_c('select',{attrs:{\"id\":\"typeOfLocation\"}},_vm._l((_vm.overpassApiKeys),function(key,index){return _c('option',{key:'option_overpass_key_' + index},[_vm._v(\" \"+_vm._s(key)+\" \")])}),0),_c('button',{staticClass:\"searchLocationButton\",on:{\"click\":_vm.searchLocationWithOverpass}},[_vm._v(\" search \")]),_c('button',{staticClass:\"searchLocationButton\",on:{\"click\":_vm.clearSearchResults}},[_vm._v(\" clear \")]),_c('p',{attrs:{\"id\":\"searchHelp\"},on:{\"click\":_vm.showHelpModal}},[_vm._v(\" help \")])]):_vm._e(),_c('iframe',{attrs:{\"id\":\"mapContainer\",\"src\":\"./mapIframe.html\"}})]),(_vm.appearanceOptions.showSuggestedDestinations)?_c('div',{attrs:{\"id\":\"suggestions\"}},[_c('label',{attrs:{\"for\":\"tripSuggestionsOption\"}},[_vm._v(\" show suggestions for next dest in trip route? \")]),_c('select',{attrs:{\"id\":\"tripSuggestionsOption\"},on:{\"change\":_vm.toggleTripSuggestions}},[_c('option',{attrs:{\"value\":\"yes\"}},[_vm._v(\" yes please! \")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"no\"}},[_vm._v(\" no thanks \")])]),(_vm.showSuggestedNextHops)?_c('div',[_c('h3',[_vm._v(\" check out these suggestions! \")]),_c('ul',_vm._l((_vm.suggestedNextDests),function(nextDest,index){return _c('li',{key:'li_nextDest_' + index},[_c('p',[_vm._v(_vm._s(nextDest))])])}),0)]):_vm._e()]):_vm._e()]),_c('div',{attrs:{\"id\":\"column2\"}},[_c('navigation',{attrs:{\"list-of-trip-names\":_vm.listOfTripNames}}),_c('div',{attrs:{\"id\":\"tripInfo\"}},[_c('h1',{staticClass:\"tripTitle\"},[_vm._v(_vm._s(_vm.tripName))]),_c('destinationList',{attrs:{\"list-of-dest\":_vm.listOfDest}})],1),_vm._m(0)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{attrs:{\"id\":\"footer\"}},[_c('a',{attrs:{\"href\":\"https://github.com/syncopika/trip-planner\",\"target\":\"_blank\"}},[_vm._v(\" source \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{attrs:{\"id\":\"stops\"},on:{\"drop\":_vm.onDrop,\"dragover\":function($event){$event.preventDefault();},\"dragenter\":function($event){$event.preventDefault();}}},_vm._l((_vm.listOfDest),function(destObj){return _c('destination',{key:destObj.name + destObj.latitude + destObj.longitude,attrs:{\"destination\":destObj}})}),1),_c('button',{staticStyle:{\"margin-bottom\":\"5px\"},on:{\"click\":_vm.addDestinationManually}},[_vm._v(\" add destination \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Destination, OverpassAPIOptions, UserSelectedOptionsInModal } from './triproute';\r\n\r\nexport class Modal {\r\n    \r\n    modalStyle: Record<string, string>;\r\n    modalOverlayStyle: Record<string, string>;\r\n\r\n    constructor(){\r\n        this.modalStyle = {\r\n            position: \"fixed\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            zIndex: \"1010\",\r\n            textAlign: \"center\",\r\n            padding: \"8px\",\r\n            backgroundColor: \"#fff\",\r\n            boxShadow: \"2px 2px 5px #ccc\",\r\n            border: \"1px solid #ccc\",\r\n            overflowY: \"auto\",\r\n        };\r\n        \r\n        this.modalOverlayStyle = {\r\n            zIndex: \"1000\",\r\n            position: \"fixed\",\r\n            top: \"0\",\r\n            left: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: \"#aaa\",\r\n            opacity: \"0.2\",\r\n        };\r\n    }\r\n\r\n    // modal for accepting text input\r\n    createInputModal(text: string): Promise<string> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle); // add attributes from this.modalStyle to modal.style\r\n        \r\n        const displayText = document.createElement('p');\r\n        displayText.textContent = text;\r\n        displayText.style.marginBottom = \"0px\";\r\n        \r\n        const textInput = document.createElement('input');\r\n        textInput.type = \"text\";\r\n        \r\n        modal.appendChild(displayText);\r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(textInput);\r\n        \r\n        const submitBtn = document.createElement('button');\r\n        submitBtn.innerText = \"submit\";\r\n        \r\n        const cancelBtn = document.createElement('button');\r\n        cancelBtn.innerText = \"cancel\";\r\n        \r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(submitBtn);\r\n        modal.appendChild(cancelBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<string>((resolve, reject) => {\r\n            submitBtn.onclick = (): void => {\r\n                const inputText = textInput.value.trim();\r\n                resolve(inputText);\r\n            };\r\n            \r\n            cancelBtn.onclick = (): void => {\r\n                resolve(undefined);\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n\r\n    // just a textbox with an ok button\r\n    createMessageModal(text: string | string[], doNotCenterText?: boolean): Promise<boolean> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle);\r\n        \r\n        //const text = document.createElement('h2');\r\n        if(typeof text === \"string\"){\r\n            const displayText = document.createElement('p');\r\n            displayText.textContent = text;\r\n            \r\n            if(doNotCenterText){\r\n                displayText.style.textAlign = \"left\";\r\n            }\r\n        \r\n            modal.appendChild(displayText);\r\n        }else{\r\n            text.forEach(t => {\r\n                const displayText = document.createElement('p');\r\n                displayText.textContent = t;\r\n                \r\n                if(doNotCenterText){\r\n                    displayText.style.textAlign = \"left\";\r\n                }\r\n            \r\n                modal.appendChild(displayText);\r\n            });\r\n        }\r\n        \r\n        const okBtn = document.createElement('button');\r\n        okBtn.innerText = \"ok\";\r\n        modal.appendChild(okBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<boolean>((resolve) => {\r\n            okBtn.onclick = (): void => {\r\n                resolve(true);\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n    \r\n    // modal for asking a question. has an ok and cancel button.\r\n    createQuestionModal(text: string): Promise<boolean> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle);\r\n        \r\n        const displayText = document.createElement('p');\r\n        displayText.textContent = text;\r\n        \r\n        modal.appendChild(displayText);\r\n        \r\n        const okBtn = document.createElement('button');\r\n        okBtn.innerText = \"ok\";\r\n        \r\n        const cancelBtn = document.createElement('button');\r\n        cancelBtn.innerText = \"cancel\";\r\n        \r\n        modal.appendChild(okBtn);\r\n        modal.appendChild(cancelBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<boolean>((resolve) => {\r\n            okBtn.onclick = (): void => {\r\n                resolve(true);\r\n            };\r\n            cancelBtn.onclick = (): void => {\r\n                resolve(false);\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n    \r\n    // modal for adding a new destination manually\r\n    addNewDestinationModal(): Promise<Partial<Destination>> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle);\r\n        \r\n        const displayText = document.createElement('h1');\r\n        displayText.textContent = \"destination details\";\r\n        modal.appendChild(displayText);\r\n        \r\n        const inputsDiv = document.createElement('div');\r\n        inputsDiv.style.display = \"grid\";\r\n        inputsDiv.style.gridTemplateColumns = \"1fr 50%\";\r\n        inputsDiv.style.gridGap = \"8px\";\r\n        \r\n        // destination name\r\n        const destinationName = document.createElement('input');\r\n        destinationName.type = \"text\";\r\n        destinationName.name = \"destinationName\";\r\n        destinationName.value = \"\";\r\n        destinationName.id = \"destinationName\";\r\n        \r\n        const destinationNameLabel = document.createElement('label');\r\n        destinationNameLabel.textContent = \"name: \";\r\n        destinationNameLabel.htmlFor = \"destinationName\";\r\n        destinationNameLabel.style.fontSize = \"18px\";\r\n        \r\n        inputsDiv.appendChild(destinationNameLabel);\r\n        inputsDiv.appendChild(destinationName);\r\n        \r\n        // latitude\r\n        const destinationLat = document.createElement('input');\r\n        destinationLat.type = \"text\";\r\n        destinationLat.name = \"destinationLat\";\r\n        destinationLat.value = \"\";\r\n        destinationLat.id = \"destinationLat\";\r\n        \r\n        const destinationLatLabel = document.createElement('label');\r\n        destinationLatLabel.textContent = \"latitude: \";\r\n        destinationLatLabel.htmlFor = \"destinationLat\";\r\n        destinationLatLabel.style.fontSize = \"18px\";\r\n        \r\n        inputsDiv.appendChild(destinationLatLabel);\r\n        inputsDiv.appendChild(destinationLat);\r\n        \r\n        // longitude\r\n        const destinationLong = document.createElement('input');\r\n        destinationLong.type = \"text\";\r\n        destinationLong.name = \"longitude: \";\r\n        destinationLong.value = \"\";\r\n        destinationLong.id = \"destinationLong\";\r\n        \r\n        const destinationLongLabel = document.createElement('label');\r\n        destinationLongLabel.textContent = \"longitude: \";\r\n        destinationLongLabel.htmlFor = \"destinationLong\";\r\n        destinationLongLabel.style.fontSize = \"18px\";\r\n        \r\n        inputsDiv.appendChild(destinationLongLabel);\r\n        inputsDiv.appendChild(destinationLong);\r\n        \r\n        const destinationNotes = document.createElement('textarea');\r\n        destinationNotes.id = \"destinationNotes\";\r\n        const destinationNotesLabel = document.createElement('label');\r\n        destinationNotesLabel.textContent = \"notes: \";\r\n        destinationNotesLabel.htmlFor = \"destinationNotes\";\r\n        destinationNotesLabel.style.fontSize = \"18px\";\r\n        \r\n        inputsDiv.appendChild(destinationNotesLabel);\r\n        inputsDiv.appendChild(destinationNotes);\r\n        \r\n        modal.appendChild(inputsDiv);\r\n        modal.appendChild(document.createElement('br'));\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        const okBtn = document.createElement('button');\r\n        okBtn.innerText = \"ok\";\r\n        \r\n        const cancelBtn = document.createElement('button');\r\n        cancelBtn.innerText = \"cancel\";\r\n        \r\n        modal.appendChild(okBtn);\r\n        modal.appendChild(cancelBtn);\r\n        \r\n        return new Promise<Partial<Destination>>((resolve) => {\r\n            okBtn.onclick = (): void => {\r\n                const data = {\r\n                    name: destinationName.value,\r\n                    latitude: parseFloat(destinationLat.value),\r\n                    longitude: parseFloat(destinationLong.value),\r\n                    notes: destinationNotes.value,\r\n                };\r\n                \r\n                if(data.name === \"\" || isNaN(data.latitude) || isNaN(data.longitude)){\r\n                    resolve({});\r\n                }else{\r\n                    resolve(data);\r\n                }\r\n            };\r\n            cancelBtn.onclick = (): void => {\r\n                resolve({});\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n    \r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"dest\",attrs:{\"id\":_vm.destination.name + '_dest',\"draggable\":\"\"},on:{\"mouseover\":_vm.highlightBorder,\"mouseleave\":_vm.dehighlightBorder,\"dragstart\":_vm.onDragStart}},[_c('h1',{attrs:{\"id\":_vm.destination.name},on:{\"click\":_vm.toggleVisibility}},[_vm._v(\" \"+_vm._s(_vm.destination.name)+\" \")]),_c('p',{staticClass:\"delete\",attrs:{\"id\":_vm.destination.name + '_delete'},on:{\"click\":_vm.removeDestination}},[_vm._v(\" x \")]),_c('div',{staticClass:\"content\",attrs:{\"id\":_vm.destination.name + '_content'}},[_c('div',{attrs:{\"id\":_vm.destination.name + '_dates'}},[_c('div',{staticClass:\"row\"},[_c('Calendar',{ref:_vm.destination.name + '_fromDate',attrs:{\"dest-name\":_vm.destination.name + '_from_',\"date\":_vm.destination.fromDate,\"is-editing\":_vm.isEditing,\"header\":'to'}})],1),_c('div',{staticClass:\"row\"},[_c('Calendar',{ref:_vm.destination.name + '_toDate',attrs:{\"dest-name\":_vm.destination.name + '_to_',\"date\":_vm.destination.toDate,\"is-editing\":_vm.isEditing,\"header\":'from'}})],1)]),_c('h3',[_vm._v(\" notes: \")]),_c('div',[_c('textarea',{attrs:{\"id\":_vm.destination.name + '_notes',\"rows\":\"5\",\"cols\":\"50\",\"disabled\":\"\"},domProps:{\"value\":_vm.destination.notes}}),_c('br')]),_c('br'),_c('h3',[_vm._v(\" images: \")]),_c('div',{attrs:{\"id\":_vm.destination.name + '_images'}},_vm._l((_vm.destination.images),function(image,index){return _c('div',{key:'div_' + _vm.destination.name + '_image_' + index,staticClass:\"imageContainer\",staticStyle:{\"margin-right\":\"2px\"}},[_c('img',{key:_vm.destination.name + '_image_' + index,attrs:{\"src\":image},on:{\"mouseover\":function($event){$event.target.style.border='1px solid #e0ffff'},\"mouseout\":function($event){$event.target.style.border='1px solid #000'},\"dblclick\":function($event){return _vm.enlargeImage($event)}}}),(_vm.isEditing)?_c('h3',{staticStyle:{\"color\":\"red\"},attrs:{\"id\":'delete_' + _vm.destination.name + '_image_' + index},on:{\"click\":function($event){return _vm.deleteImage($event)}}},[_vm._v(\" x \")]):_vm._e()])}),0),_c('br'),(_vm.isEditing)?_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"id\":_vm.destination.name + '_editRouteColor'}},[_c('label',{attrs:{\"for\":_vm.destination.name + '_routeColor'}},[_vm._v(\" route color: \")]),_c('input',{style:('background-color: ' + _vm.destination.routeColor),attrs:{\"id\":_vm.destination.name + '_routeColor',\"name\":_vm.destination.name + '_routeColor',\"type\":\"text\",\"size\":\"7\"},domProps:{\"value\":_vm.destination.routeColor}}),_c('button',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":_vm.destination.name + '_routeColor_btn'},on:{\"click\":_vm.showColorWheel}},[_vm._v(\" show color wheel \")])]):_vm._e(),(!_vm.isEditing)?_c('h3',[_vm._v(\" route color: \"),_c('span',{style:('background-color: ' + _vm.destination.routeColor)},[_vm._v(_vm._s(_vm.destination.routeColor))])]):_vm._e(),_c('hr'),_c('p',{staticClass:\"latlng\"},[_vm._v(\" lat: \"+_vm._s(_vm.destination.latitude)+\", long: \"+_vm._s(_vm.destination.longitude)+\" \")]),(!_vm.isEditing)?_c('button',{on:{\"click\":_vm.toggleEdit}},[_vm._v(\" edit \")]):_vm._e(),_c('input',{staticClass:\"inputFile\",attrs:{\"type\":\"file\",\"accept\":\"image/*\",\"id\":_vm.destination.name + '_importImage'},on:{\"change\":_vm.uploadImage}}),(_vm.isEditing)?_c('button',{on:{\"click\":_vm.clickInput}},[_vm._v(\" upload image \")]):_vm._e(),(_vm.isEditing)?_c('button',{staticClass:\"editButton\",on:{\"click\":_vm.saveChanges}},[_vm._v(\" save \")]):_vm._e(),(_vm.isEditing)?_c('button',{staticClass:\"editButton\",on:{\"click\":_vm.cancelChanges}},[_vm._v(\" cancel \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isEditing)?_c('div',{staticClass:\"calendar\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.header)+\": \")]),_c('input',{attrs:{\"id\":_vm.destName + 'month',\"type\":\"text\",\"size\":\"2\",\"maxlength\":\"2\",\"placeholder\":\"mm\"}}),_c('p',[_vm._v(\" / \")]),_c('input',{attrs:{\"id\":_vm.destName + 'day',\"type\":\"text\",\"size\":\"2\",\"maxlength\":\"2\",\"placeholder\":\"dd\"}}),_c('p',[_vm._v(\" / \")]),_c('input',{attrs:{\"id\":_vm.destName + 'year',\"type\":\"text\",\"size\":\"4\",\"maxlength\":\"4\",\"placeholder\":\"yyyy\"}})]):_vm._e(),(!_vm.isEditing)?_c('div',{staticClass:\"calendar\"},[_c('h3',[_vm._v(_vm._s(_vm.header)+\": \"+_vm._s(_vm.date.length === 2 ? \"\" : _vm.date.replaceAll(\"-\", \"/\"))+\" \")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\n\r\nexport default Vue.extend({\r\n    data(){\r\n        return {}\r\n    },\r\n    props: {\r\n        destName: { required: true, type: String },\r\n        isEditing: { required: true, type: Boolean },\r\n        date: { required: true, type: String },\r\n        header: { required: true, type: String },\r\n    },\r\n    methods: {\r\n        getDateInfo: function(): {month: string; day: string; year: string} {\r\n            const destName = this.destName;\r\n            const month: HTMLInputElement = document.getElementById(destName + \"month\") as HTMLInputElement;\r\n            const day: HTMLInputElement = document.getElementById(destName + \"day\") as HTMLInputElement;\r\n            const year: HTMLInputElement = document.getElementById(destName + \"year\") as HTMLInputElement;\r\n            return {\r\n                month: month.value,\r\n                day: day.value,\r\n                year: year.value\r\n            };\r\n        }\r\n    },\r\n    updated: function(){\r\n        if(this.date && this.isEditing){\r\n            // show the input fields with the date filled in\r\n            const dateParts = this.date.split(\"-\"); // dates should be delimited by \"-\"\r\n            const destName = this.destName;\r\n\r\n            const month: HTMLInputElement = document.getElementById(destName + \"month\") as HTMLInputElement;\r\n            const day: HTMLInputElement = document.getElementById(destName + \"day\") as HTMLInputElement;\r\n            const year: HTMLInputElement = document.getElementById(destName + \"year\") as HTMLInputElement;\r\n\r\n            if(month && dateParts.length > 0) month.value = dateParts[0];\r\n            if(day && dateParts.length > 1) day.value = dateParts[1];\r\n            if(year && dateParts.length > 2) year.value = dateParts[2];\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Calendar.vue?vue&type=template&id=7c9ce71d&scoped=true&\"\nimport script from \"./Calendar.vue?vue&type=script&lang=ts&\"\nexport * from \"./Calendar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Calendar.vue?vue&type=style&index=0&id=7c9ce71d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c9ce71d\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport Calendar from './Calendar.vue';\r\nimport { Destination } from '../utils/triproute';\r\nimport { Modal } from '../utils/modal';\r\n\r\n// get info passed from parent component (i.e. Sidebar)\r\nexport default Vue.extend({\r\n    data(){\r\n        return {\r\n            expanded: false,\r\n            isEditing: false,\r\n            editSnapshot: {},\r\n            currDestTitle: \"\"\r\n        }\r\n    },\r\n    components: {\r\n        Calendar\r\n    },\r\n    props: {\r\n        destination: {required: true, type: Object}\r\n    },\r\n    methods: {\r\n        highlightBorder: function(): void {\r\n            const name = this.destination.name;\r\n            const dest = document.getElementById(name + '_dest');\r\n            if(dest !== null){\r\n                dest.style.border = '2px solid #fff';\r\n            }\r\n        },\r\n        \r\n        dehighlightBorder: function(): void {\r\n            const name = this.destination.name;\r\n            const dest = document.getElementById(name + '_dest');\r\n            if(dest !== null){\r\n                dest.style.border = '2px solid #000';\r\n            }    \r\n        },\r\n        \r\n        toggleVisibility: function(): void {\r\n            const name = this.destination.name;\r\n            const content = document.getElementById(name + '_content');\r\n\r\n            if(content !== null){\r\n                if(this.expanded && !this.isEditing){\r\n                    content.style.display = \"none\";\r\n                }else{\r\n                    content.style.display = \"block\";\r\n                }\r\n            }\r\n\r\n            this.expanded = !this.expanded;\r\n        },\r\n        \r\n        toggleEdit: function(evt: Event): void {\r\n            // prevent div from closing\r\n            evt.stopPropagation();\r\n            \r\n            const name = this.destination.name;\r\n            \r\n            this.isEditing = true;\r\n\r\n            // take a snapshot of all current data so we can cancel changes easily\r\n            //console.log(this.destination);\r\n            this.editSnapshot = JSON.parse(JSON.stringify(this.destination));\r\n            \r\n            // make destination name editable\r\n            const destTitle = document.getElementById(name);\r\n            destTitle?.setAttribute('contenteditable', \"true\");\r\n\r\n            // save the current title so we can restore it if it can't be changed\r\n            this.currDestTitle = destTitle?.textContent || \"\";\r\n\r\n            // make content editable\r\n            const notes = document.getElementById(name + '_notes');\r\n            if(notes !== null) notes.removeAttribute('disabled');\r\n        },\r\n        \r\n        removeDestination: async function(evt: Event): Promise<void> {\r\n            // remove a destination\r\n            // calls a method of the Vue root instance\r\n            const modal = new Modal();\r\n            const remove = await modal.createQuestionModal(\"Are you sure you want to remove this destination?\");\r\n            if (remove) {\r\n                const name = (evt.target as HTMLElement).id.split(\"_\")[0]; // i.e. name_dest, and we want name\r\n\r\n                //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n                this.$root.removeDestination(name);\r\n            }\r\n        },\r\n        \r\n        saveChanges: function(): void {\r\n            // note: when save is clicked and the data is sent to the root\r\n            // to update state, the destination name, if edited, will be\r\n            // checked to make sure its new desired name is not already taken\r\n            // by another destination\r\n\r\n            const name = this.destination.name;\r\n            const destTitle = document.getElementById(name);\r\n            const newName = destTitle?.textContent?.trim();\r\n\r\n            // if new name is valid (i.e. not an empty string), the change will happen\r\n            // if it doesn't happen, we'll at least have restored the dest title to its original\r\n            if (destTitle) {\r\n                destTitle.textContent = this.currDestTitle;\r\n                destTitle.setAttribute('contenteditable', \"false\");\r\n            }\r\n\r\n            const notes = document.getElementById(name + '_notes');\r\n            notes?.setAttribute('disabled', 'true');\r\n\r\n            const data: Destination = JSON.parse(JSON.stringify(this.destination)); // make a copy\r\n            data.notes = (notes as HTMLTextAreaElement)?.value;\r\n            data.newName = newName;\r\n\r\n            // get from and to dates\r\n            //@ts-ignore (TS-2339)\r\n            const fromDate = this.$refs[name + \"_fromDate\"].getDateInfo();\r\n            //@ts-ignore (TS-2339)\r\n            const toDate = this.$refs[name + \"_toDate\"].getDateInfo();\r\n\r\n            data.fromDate = `${fromDate.month}-${fromDate.day}-${fromDate.year}`;\r\n            data.toDate = `${toDate.month}-${toDate.day}-${toDate.year}`;\r\n\r\n            // get route color and remove color wheel\r\n            const routeColorInput = document.getElementById(this.destination.name + \"_routeColor\") as HTMLInputElement;\r\n            if(routeColorInput) data.routeColor = routeColorInput.value;\r\n\r\n            const colorWheel = document.getElementById(this.destination.name + \"_colorWheel\");\r\n            if(colorWheel && colorWheel.parentNode) colorWheel.parentNode.removeChild(colorWheel);\r\n\r\n            // update data source with new info\r\n            //@ts-ignore \r\n            this.$root.updateDestination(data);\r\n\r\n            this.isEditing = false;\r\n        },\r\n        \r\n        cancelChanges: function(): void {\r\n            // make sure destination name goes back to being uneditable\r\n            const name = this.destination.name;\r\n            const destTitle = document.getElementById(name);\r\n            destTitle?.setAttribute('contenteditable', \"false\");\r\n            \r\n            const notes = document.getElementById(name + '_notes');\r\n            notes?.setAttribute('disabled', 'true');\r\n\r\n            const currData = JSON.parse(JSON.stringify(this.editSnapshot));\r\n            for(const data in currData) {\r\n                this.destination[data] = currData[data];\r\n            }\r\n            this.editSnapshot = {};\r\n            this.isEditing = false;\r\n        },\r\n        \r\n        uploadImage: function(evt: Event): void {\r\n            const img = new Image();\r\n            const reader = new FileReader();\r\n            const files = (evt.target as HTMLInputElement).files;\r\n            \r\n            if(files === null || files.length !== 1){\r\n                return;\r\n            }\r\n            \r\n            const file = files[0];\r\n\r\n            reader.onloadend = (): void => {\r\n                const imgSrcStr = reader.result as string;\r\n\r\n                img.src = imgSrcStr;\r\n\r\n                // update data\r\n                const data: Destination = JSON.parse(JSON.stringify(this.destination)); // making a copy\r\n                data.images.push(imgSrcStr);\r\n\r\n                //@ts-ignore \r\n                this.$root.updateDestination(data);\r\n            };\r\n            //read the file as a URL\r\n            reader.readAsDataURL(file);\r\n        },\r\n        \r\n        clickInput: function(): void {\r\n            const inputElement = document.getElementById(this.destination.name + \"_importImage\");\r\n            inputElement?.click();\r\n        },\r\n        \r\n        enlargeImage: function(evt: Event): void {\r\n            const imageDiv = document.createElement('div');\r\n            imageDiv.style.opacity = \"0.98\";\r\n            imageDiv.style.backgroundColor = \"#383838\";\r\n            imageDiv.style.position = \"fixed\";\r\n            imageDiv.style.top = \"0\";\r\n            imageDiv.style.left = \"0\";\r\n            imageDiv.style.height = \"100%\";\r\n            imageDiv.style.width = \"100%\";\r\n            imageDiv.style.textAlign = \"center\";\r\n            imageDiv.style.overflow = \"scroll\";\r\n            imageDiv.style.zIndex = \"1010\";\r\n\r\n            document.body.style.overflow = \"hidden\";\r\n\r\n            const enlargedImage = new Image();\r\n            enlargedImage.src = (evt.target as HTMLImageElement).src;\r\n            enlargedImage.addEventListener(\"dblclick\", () => {\r\n                imageDiv?.parentNode?.removeChild(imageDiv);\r\n                document.body.style.overflow = \"visible\";\r\n            });\r\n            enlargedImage.style.marginTop = \"1%\";\r\n\r\n            if(document.body.clientHeight < enlargedImage.height ||\r\n                document.body.clientWidth < enlargedImage.width) {\r\n                // reduce size of enlarged image if larger than the page\r\n                // or rescale using a canvas?\r\n            }\r\n\r\n            imageDiv.appendChild(enlargedImage);\r\n\r\n            const cancel = document.createElement('h3');\r\n            cancel.textContent = \"close\";\r\n            cancel.style.fontFamily = \"Montserrat\";\r\n            cancel.style.fontWeight = \"bold\";\r\n            cancel.style.fontSize = \"2em\";\r\n            cancel.style.color = \"#fff\";\r\n            cancel.style.marginTop = \"1%\";\r\n            cancel.addEventListener(\"click\", () => {\r\n                imageDiv?.parentNode?.removeChild(imageDiv);\r\n                document.body.style.overflow = \"visible\";\r\n            });\r\n            imageDiv.appendChild(cancel);\r\n\r\n            document.body.appendChild(imageDiv);\r\n        },\r\n        \r\n        deleteImage: function(evt: Event): void {\r\n            // get index of image from id\r\n            const imageIndexStr = (evt.target as HTMLElement).id.split(\"_\");\r\n            const imageIndex = parseInt(imageIndexStr[imageIndexStr.length - 1]);\r\n\r\n            this.destination.images.splice(imageIndex, 1);\r\n        },\r\n        \r\n        showColorWheel: function(): void {\r\n            const location = document.getElementById(this.destination.name + '_editRouteColor');\r\n            const colorWheelId = this.destination.name + \"_colorWheel\";\r\n            \r\n            if(document.getElementById(colorWheelId)){\r\n                // don't add a new one if there already is one\r\n                return;\r\n            }\r\n            \r\n            const size = \"200\";\r\n            const colorWheel = document.createElement('canvas');\r\n            colorWheel.id = colorWheelId;\r\n            colorWheel.setAttribute('width', size);\r\n            colorWheel.setAttribute('height', size);\r\n\r\n            const colorWheelContext = colorWheel.getContext('2d');\r\n            const x = colorWheel.width / 2;\r\n            const y = colorWheel.height / 2;\r\n            const radius = 90;\r\n\r\n            // why 5600??\r\n            if(colorWheelContext) {\r\n                for(let angle = 0; angle <= 5600; angle++) {\r\n                    const startAngle = (angle - 2) * Math.PI / 180; //convert angles to radians\r\n                    const endAngle = angle * Math.PI / 180;\r\n                    colorWheelContext.beginPath();\r\n                    colorWheelContext.moveTo(x, y);\r\n                    //.arc(x, y, radius, startAngle, endAngle, anticlockwise)\r\n                    colorWheelContext.arc(x, y, radius, startAngle, endAngle, false);\r\n                    colorWheelContext.closePath();\r\n                    //use .createRadialGradient to get a different color for each angle\r\n                    //createRadialGradient(x0, y0, r0, x1, y1, r1)\r\n                    const gradient = colorWheelContext.createRadialGradient(x, y, 0, startAngle, endAngle, radius);\r\n                    gradient.addColorStop(0, 'hsla(' + angle + ', 10%, 100%, 1)');\r\n                    gradient.addColorStop(1, 'hsla(' + angle + ', 100%, 50%, 1)');\r\n                    colorWheelContext.fillStyle = gradient;\r\n                    colorWheelContext.fill();\r\n                }\r\n\r\n                // make black a pickable color\r\n                colorWheelContext.fillStyle = \"#000\";\r\n                colorWheelContext.beginPath();\r\n                colorWheelContext.arc(10, 10, 8, 0, 2 * Math.PI);\r\n                colorWheelContext.fill();\r\n\r\n                // make white pickable too\r\n                // black outline\r\n                colorWheelContext.beginPath();\r\n                colorWheelContext.arc(30, 10, 8, 0, 2 * Math.PI); // border around the white \r\n                colorWheelContext.stroke();\r\n\r\n                // make sure circle is filled with #fff\r\n                colorWheelContext.fillStyle = \"#fff\";\r\n                colorWheelContext.arc(30, 10, 8, 0, 2 * Math.PI);\r\n                colorWheelContext.fill();\r\n\r\n                colorWheel.addEventListener('click', (e) => {\r\n                    const x = e.offsetX;\r\n                    const y = e.offsetY;\r\n\r\n                    //@ts-ignore (2531)\r\n                    const colorPicked = (colorWheel.getContext('2d')).getImageData(x, y, 1, 1).data;\r\n                    // convert to hex?\r\n                    const colorCode = 'rgb(' + colorPicked[0] + ',' + colorPicked[1] + ',' + colorPicked[2] + ')';\r\n                    const colorInput = document.getElementById(this.destination.name + \"_routeColor\") as HTMLInputElement;\r\n                    if(colorInput) {\r\n                        colorInput.value = colorCode;\r\n                        colorInput.style.backgroundColor = colorCode;\r\n                    }\r\n                });\r\n            }\r\n\r\n            if(location) location.appendChild(colorWheel);\r\n        },\r\n        \r\n        onDragStart: function(evt: DragEvent): void {\r\n            evt.stopPropagation();\r\n            \r\n            const thisEl = evt.target as HTMLElement;\r\n            if(thisEl){\r\n                if(evt.dataTransfer){\r\n                    evt.dataTransfer.dropEffect = \"move\";\r\n                    evt.dataTransfer.effectAllowed = \"move\";\r\n                    evt.dataTransfer.setData(\"currentDraggedElementId\", thisEl.id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Destination.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Destination.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Destination.vue?vue&type=template&id=58f3b521&scoped=true&\"\nimport script from \"./Destination.vue?vue&type=script&lang=ts&\"\nexport * from \"./Destination.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Destination.vue?vue&type=style&index=0&id=58f3b521&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58f3b521\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue, { PropType } from 'vue';\r\nimport Component from 'vue-class-component';\r\nimport { Destination as DestinationInterface } from '../utils/triproute';\r\nimport { Modal } from \"../utils/modal\";\r\nimport Destination from './Destination.vue';\r\n\r\nconst DestinationListProps = Vue.extend({\r\n    props: {\r\n        listOfDest: {\r\n            type: Array as PropType<Array<DestinationInterface>>,\r\n            required: true\r\n        }\r\n    }\r\n})\r\n\r\n@Component({\r\n    components: {\r\n        Destination\r\n    }\r\n})\r\n\r\nexport default class DestinationList extends DestinationListProps {\r\n    \r\n    onDrop(evt: DragEvent): void {\r\n        const thisEl = evt.target as HTMLElement;\r\n        \r\n        if(evt.dataTransfer){\r\n            const currDragElementId = evt.dataTransfer.getData(\"currentDraggedElementId\");\r\n            \r\n            // update order of destinations in the list\r\n            if(thisEl && currDragElementId !== thisEl.id){\r\n                if(evt.dataTransfer){\r\n                    const currDragName = currDragElementId.split(\"_\")[0]; // extract the destination name from the id\r\n                    const currDraggedElementIndex = this.listOfDest.findIndex(dest => dest.name === currDragName);\r\n                    const targetName = thisEl.id.split(\"_\")[0];\r\n                    const targetElementIndex = this.listOfDest.findIndex(dest => dest.name === targetName);\r\n                    this.listOfDest.splice(targetElementIndex, 0, this.listOfDest.splice(currDraggedElementIndex, 1)[0]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    async addDestinationManually(): Promise<void> {\r\n        const data: DestinationInterface = {\r\n            name:       \"\",\r\n            toDate:     \"\",\r\n            fromDate:   \"\",\r\n            latitude:   0,\r\n            longitude:  0,\r\n            notes:      \"\",\r\n            images:     [],\r\n            routeColor: \"#888\",\r\n        };\r\n        \r\n        const modal = new Modal();\r\n        const destinationData: Partial<DestinationInterface> = await modal.addNewDestinationModal();\r\n        if(destinationData && destinationData.name && destinationData.latitude && destinationData.longitude){\r\n            data.name = destinationData.name;\r\n            data.latitude = destinationData.latitude;\r\n            data.longitude = destinationData.longitude;\r\n            data.notes = destinationData.notes || \"\";\r\n            \r\n            if(!isNaN(data.latitude) && !isNaN(data.longitude)){\r\n                console.log(\"adding new destination manually\");\r\n                // update data source with new info\r\n                //@ts-ignore \r\n                this.$root.addNewDestination(data);\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DestinationList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DestinationList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DestinationList.vue?vue&type=template&id=68b8f72c&\"\nimport script from \"./DestinationList.vue?vue&type=script&lang=ts&\"\nexport * from \"./DestinationList.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuHeader\"}},[_c('h2',[_vm._v(\" trip-planner \")]),_c('ul',[_c('li',{staticClass:\"selectOption\",attrs:{\"id\":\"createNewTrip\"},on:{\"click\":_vm.addNewTrip}},[_vm._v(\" new trip \")]),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"dropdown\"},[_c('p',{staticClass:\"dropbtn\"},[_vm._v(\" select trip \")]),_c('div',{staticClass:\"dropContent\"},_vm._l((_vm.listOfTripNames),function(tripName,index){return _c('a',{key:tripName + '_' + index,attrs:{\"href\":\"#\",\"id\":'tripIndex_' + index},on:{\"click\":_vm.selectTrip}},[_vm._v(\" \"+_vm._s(tripName)+\" \")])}),0)]),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"selectOption\",on:{\"click\":_vm.triggerImport}},[_vm._v(\" import \")]),_c('input',{attrs:{\"type\":\"file\",\"id\":\"importTripData\"},on:{\"change\":_vm.importData}}),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"dropdown\"},[_c('p',{staticClass:\"dropbtn\"},[_vm._v(\" export \")]),_c('div',{staticClass:\"dropContent\"},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.exportData}},[_vm._v(\" export JSON \")]),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.exportCurrTripHTML}},[_vm._v(\" export HTML \")])])]),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"selectOption\",on:{\"click\":function($event){_vm.showOptionsModal=true}}},[_vm._v(\" options \")]),(_vm.showOptionsModal)?_c('OptionsModal',{attrs:{\"initialTheme\":_vm.theme,\"initialShowLocationLookup\":_vm.showLocationLookup,\"initialShowSuggestedDestinations\":_vm.showSuggestedDestinations,\"initialOverpassApiEntity\":_vm.overpassApiEntity,\"initialNextDestDataSource\":_vm.nextDestDataSource},on:{\"update-options\":_vm.handleUpdateOptions,\"close\":function($event){_vm.showOptionsModal=false}}}):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"modal\"},[_c('h1',[_vm._v(\" options \")]),_c('p',{staticClass:\"experimentalNote\"},[_vm._v(\" * = experimental feature. please don't expect too much :) \")]),_c('hr'),_c('p',{attrs:{\"id\":\"locationLookup\"}},[_vm._v(\" location lookup* \")]),_c('div',{staticClass:\"section\"},[_c('label',{attrs:{\"id\":\"toggleLocationSearchBarLabel\",\"for\":\"toggleLocationSearchBar\"}},[_vm._v(\" show location search bar: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.showLocationLookup),expression:\"showLocationLookup\"}],attrs:{\"id\":\"toggleLocationSearchBar\",\"name\":\"toggleLocationSearchBar\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showLocationLookup,\"checked\":Array.isArray(_vm.showLocationLookup)?_vm._i(_vm.showLocationLookup,null)>-1:(_vm.showLocationLookup)},on:{\"change\":function($event){var $$a=_vm.showLocationLookup,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.showLocationLookup=$$a.concat([$$v]))}else{$$i>-1&&(_vm.showLocationLookup=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.showLocationLookup=$$c}}}})]),_c('hr'),_c('p',{attrs:{\"id\":\"destinationSuggestions\"}},[_vm._v(\" destination suggestions* \")]),_c('div',{staticClass:\"section\"},[_c('label',{attrs:{\"id\":\"toggleSuggestedDestinationsLabel\",\"for\":\"toggleSuggestedDestinations\"}},[_vm._v(\" toggle suggested destinations: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.showSuggestedDestinations),expression:\"showSuggestedDestinations\"}],attrs:{\"id\":\"toggleSuggestedDestinations\",\"name\":\"toggleSuggestedDestinations\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showSuggestedDestinations,\"checked\":Array.isArray(_vm.showSuggestedDestinations)?_vm._i(_vm.showSuggestedDestinations,null)>-1:(_vm.showSuggestedDestinations)},on:{\"change\":function($event){var $$a=_vm.showSuggestedDestinations,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.showSuggestedDestinations=$$a.concat([$$v]))}else{$$i>-1&&(_vm.showSuggestedDestinations=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.showSuggestedDestinations=$$c}}}}),_c('p',{attrs:{\"id\":\"destinationSuggestionSourceText\"}},[_vm._v(\" data source: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nextDestDataSource),expression:\"nextDestDataSource\"}],attrs:{\"type\":\"radio\",\"name\":\"destinationSuggestionSource\",\"value\":\"'database'\",\"id\":\"databaseOption\",\"disabled\":!_vm.showSuggestedDestinations},domProps:{\"checked\":_vm.nextDestDataSource == 'database',\"checked\":_vm._q(_vm.nextDestDataSource,\"'database'\")},on:{\"change\":function($event){_vm.nextDestDataSource=\"'database'\"}}}),_c('label',{attrs:{\"for\":\"databaseOption\"}},[_vm._v(\"other users from database\")]),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nextDestDataSource),expression:\"nextDestDataSource\"}],attrs:{\"type\":\"radio\",\"name\":\"destinationSuggestionSource\",\"value\":\"'overpassApi'\",\"id\":\"overpassApiOption\",\"disabled\":!_vm.showSuggestedDestinations},domProps:{\"checked\":_vm.nextDestDataSource == 'overpassApi',\"checked\":_vm._q(_vm.nextDestDataSource,\"'overpassApi'\")},on:{\"change\":function($event){_vm.nextDestDataSource=\"'overpassApi'\"}}}),_c('label',{attrs:{\"for\":\"overpassApiOption\"}},[_vm._v(\"Overpass API\")]),_c('br'),_c('label',{attrs:{\"for\":\"overpassApiSelect\"}},[_vm._v(\"suggested destination type:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedOverpassApiEntity),expression:\"selectedOverpassApiEntity\"}],attrs:{\"id\":\"overpassApiSelect\",\"disabled\":!_vm.showSuggestedDestinations},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedOverpassApiEntity=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.overpassApiEntities),function(entity){return _c('option',{key:entity,domProps:{\"value\":entity}},[_vm._v(_vm._s(entity))])}),0)]),_c('hr'),_c('p',{attrs:{\"id\":\"appearance\"}},[_vm._v(\"appearance\")]),_c('div',{staticClass:\"section\"},[_c('label',{attrs:{\"for\":\"themeSelect\"}},[_vm._v(\"theme:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedTheme),expression:\"selectedTheme\"}],attrs:{\"id\":\"themeSelect\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedTheme=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"pastel\"},domProps:{\"selected\":_vm.selectedTheme === 'pastel'}},[_vm._v(\" pastel \")]),_c('option',{attrs:{\"value\":\"gray\"},domProps:{\"selected\":_vm.selectedTheme === 'gray'}},[_vm._v(\" gray \")]),_c('option',{attrs:{\"value\":\"beach\"},domProps:{\"selected\":_vm.selectedTheme === 'beach'}},[_vm._v(\" beach \")])])]),_c('hr'),_c('div',{attrs:{\"id\":\"buttons\"}},[_c('button',{on:{\"click\":_vm.updateOptions}},[_vm._v(\" ok \")]),_c('button',{on:{\"click\":function($event){return _vm.$emit('close')}}},[_vm._v(\" cancel \")])])]),_c('div',{staticClass:\"modalOverlay\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// https://v2.vuejs.org/v2/examples/modal\r\n\r\nimport Vue from \"vue\";\r\nimport { Destination, UserSelectedOptionsInModal } from '../utils/triproute';\r\n\r\nexport default Vue.extend({\r\n    props: {\r\n        initialTheme: String,\r\n        initialShowLocationLookup: Boolean,\r\n        initialShowSuggestedDestinations: Boolean,\r\n        initialOverpassApiEntity: String,\r\n        initialNextDestDataSource: String,\r\n    },\r\n    data: function(){\r\n        return {\r\n            nextDestDataSource: this.initialNextDestDataSource,\r\n            selectedOverpassApiEntity: this.initialOverpassApiEntity,\r\n            mapType: '',\r\n            selectedTheme: this.initialTheme,\r\n            showLocationLookup: this.initialShowLocationLookup,\r\n            showSuggestedDestinations: this.initialShowSuggestedDestinations,\r\n            overpassApiEntities: [\r\n                'restaurant',\r\n                'arts_centre',\r\n                'library',\r\n                'aquarium',\r\n                'attraction',\r\n                'hotel',\r\n                'museum',\r\n            ],\r\n        }\r\n    },\r\n    methods: {\r\n        updateOptions: function(): void {\r\n            const data: UserSelectedOptionsInModal = {\r\n                theme: this.selectedTheme,\r\n                showLocationLookup: this.showLocationLookup,\r\n                showSuggestedDestinations: this.showSuggestedDestinations,\r\n                nextDestDataSource: this.nextDestDataSource,\r\n                overpassApiEntity: this.selectedOverpassApiEntity,\r\n                mapType: '',\r\n            };\r\n            \r\n            //console.log(`selected options: ${JSON.stringify(data)}`);\r\n            \r\n            this.$emit('update-options', data);\r\n            \r\n            this.$emit(\"close\");\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OptionsModal.vue?vue&type=template&id=7d07ca06&scoped=true&\"\nimport script from \"./OptionsModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./OptionsModal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OptionsModal.vue?vue&type=style&index=0&id=7d07ca06&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d07ca06\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport OptionsModal from './OptionsModal.vue';\r\nimport { Modal } from \"../utils/modal\";\r\nimport { UserSelectedOptionsInModal } from \"../utils/triproute\";\r\n\r\nexport default Vue.extend({\r\n    props: {\r\n        listOfTripNames: { required: true, type: Array }\r\n    },\r\n    components: {\r\n        OptionsModal\r\n    },\r\n    data: function(){\r\n        return {\r\n            mapType: \"\", // only 1 map type currently\r\n            theme: \"pastel\",\r\n            showLocationLookup: false,\r\n            showSuggestedDestinations: false,\r\n            showOptionsModal: false,\r\n            overpassApiEntity: 'restaurant',\r\n            nextDestDataSource: 'overpassApi',\r\n        };\r\n    },\r\n    methods: {\r\n        addNewTrip: async function(): Promise<void> {\r\n            const modalHandler = new Modal();\r\n            const newTripName = await modalHandler.createInputModal(\"please enter the name of the new trip:\");\r\n            \r\n            if(newTripName){\r\n                (this.$root as any).addNewTrip(newTripName);\r\n            }\r\n        },\r\n        \r\n        selectTrip: function(evt: MouseEvent): void {\r\n            if(evt){\r\n                const index = parseInt((evt.target as HTMLParagraphElement).id.split(\"_\")[1]);\r\n                (this.$root as any).selectTrip(index);\r\n            }\r\n        },\r\n        \r\n        triggerImport: function(): void {\r\n            if(confirm(\"Do you want to save or export your current data first? Importing will overwrite your current trip data.\")){\r\n                const importButton = document.getElementById('importTripData');\r\n                importButton?.click();\r\n            }\r\n        },\r\n        \r\n        importData: function(evt: MouseEvent): void {\r\n            // call root to import data\r\n            (this.$root as any).importData(evt);\r\n        },\r\n        \r\n        exportData: function(): void {\r\n            // call root to download trip data\r\n            (this.$root as any).exportData();\r\n        },\r\n        \r\n        exportCurrTripHTML: function(): void {\r\n            (this.$root as any).exportCurrTripHTML();\r\n        },\r\n        \r\n        saveData: function(): void {\r\n            // TODO: save current trip data to database\r\n        },\r\n    \r\n        // update any option value changes from the OptionsModal component\r\n        handleUpdateOptions(value: UserSelectedOptionsInModal): void {\r\n            // update our state vars\r\n            this.theme = value.theme;\r\n            this.showLocationLookup = value.showLocationLookup;\r\n            this.showSuggestedDestinations = value.showSuggestedDestinations;\r\n            this.overpassApiEntity = value.overpassApiEntity;\r\n            this.nextDestDataSource = value.nextDestDataSource;\r\n        \r\n            if(value.showSuggestedDestinations && value.nextDestDataSource === \"overpassApi\"){\r\n                //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n                this.$root.setOverpassApiUse(true, value.overpassApiEntity); // update useOverpassAPI in root\r\n            }else{\r\n                //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n                this.$root.setOverpassApiUse(false);\r\n            }\r\n            \r\n            //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n            this.$root.updateAppearancePerOptions(value);\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Navigation.vue?vue&type=template&id=15aa120a&scoped=true&\"\nimport script from \"./Navigation.vue?vue&type=script&lang=ts&\"\nexport * from \"./Navigation.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Navigation.vue?vue&type=style&index=0&id=15aa120a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15aa120a\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue, { PropType } from 'vue';\r\nimport Component from 'vue-class-component';\r\nimport { Destination, UserSelectedOptionsInModal } from './utils/triproute';\r\nimport DestinationList from './components/DestinationList.vue';\r\nimport Navigation from './components/Navigation.vue';\r\nimport { Modal } from './utils/modal';\r\n\r\nconst TripPlannerAppProps = Vue.extend({\r\n    props: {\r\n        listOfDest: {\r\n            required: true,\r\n            type: Array as PropType<Array<Destination>>\r\n        },\r\n        tripName: {\r\n            required: true,\r\n            type: String\r\n        },\r\n        listOfTripNames: {\r\n            required: true,\r\n            type: Array as PropType<Array<string>>\r\n        },\r\n        suggestedNextDests: {\r\n            required: true,\r\n            type: Array as PropType<Array<Destination>>\r\n        },\r\n        appearanceOptions: {\r\n            required: true,\r\n            type: Object as PropType<Record<string, any>>\r\n        },\r\n    }\r\n})\r\n\r\n\r\n@Component({\r\n    components: {\r\n        DestinationList,\r\n        Navigation\r\n    }\r\n})\r\n\r\nexport default class App extends TripPlannerAppProps {\r\n\r\n    showSuggestedNextHops = false;\r\n\r\n    // e.g. https://wiki.openstreetmap.org/wiki/Key:amenity\r\n    overpassApiKeys: string[] = [\r\n        \"shop\",\r\n        \"amenity\",\r\n    ];\r\n\r\n    created(): void {\r\n        this.$watch('listOfDest', (newVal: Array<Destination>) => {\r\n            this.updateMap(newVal);\r\n\r\n            // whenever listOfDest changes, suggestedNextDests should too\r\n            if(this.showSuggestedNextHops){\r\n                this.updateSuggestedNextHops(this.suggestedNextDests);\r\n            }\r\n        }, {deep: true});\r\n\r\n        this.$watch('suggestedNextDests', () => {\r\n            if(this.showSuggestedNextHops){\r\n                this.updateSuggestedNextHops(this.suggestedNextDests);\r\n            }\r\n        }, {deep: true});\r\n    }\r\n\r\n    dispatchEventToMap(eventName: string, data: Array<Destination>): void {\r\n        // send a custom event to the map iframe along with the data\r\n        const updateMapEvent = new CustomEvent(eventName, {detail: data});\r\n        const mapIframe = document.getElementById('mapContainer') as HTMLIFrameElement;\r\n\r\n        if(mapIframe !== null && mapIframe.contentDocument !== null){\r\n            //console.log(\"sending data to the iframe for event: \" + eventName);\r\n            mapIframe.contentDocument.dispatchEvent(updateMapEvent);\r\n        }\r\n    }\r\n    \r\n    updateMap(data: Array<Destination>): void {\r\n        // take new destination data and update the MapBox map markers as needed\r\n        //console.log(\"I'm supposed to update the map!\");\r\n        this.dispatchEventToMap('updateMap', data);\r\n    }\r\n\r\n    updateSuggestedNextHops(data: Array<Destination>): void {\r\n        this.dispatchEventToMap('updateSuggestedNextHops', data);\r\n    }\r\n\r\n    toggleTripSuggestions(): void {\r\n        this.showSuggestedNextHops = !this.showSuggestedNextHops;\r\n\r\n        // make sure map reflects new value\r\n        if(!this.showSuggestedNextHops){\r\n            this.updateSuggestedNextHops([]);\r\n        } else {\r\n            this.updateSuggestedNextHops(this.suggestedNextDests);\r\n        }\r\n    }\r\n\r\n    async toggleTripTitleEdit(evt: Event): Promise<void> {\r\n        const el = evt.target as HTMLElement;\r\n        \r\n        if(el === null) return;\r\n        \r\n        if(el.classList.contains(\"tripTitle\")){\r\n            el.setAttribute(\"contenteditable\", \"true\");\r\n        }else{\r\n            // check if we should edit the trip title. if the current text is of another\r\n            // trip that already exists, don't allow it and reset the text\r\n            // otherwise, update\r\n            const trip = document.querySelector(\".tripTitle\"); // there should only be one trip shown at a time\r\n            \r\n            if(trip){\r\n                const editedTripName = trip.textContent ? trip.textContent.trim() : \"\";\r\n                if(editedTripName !== this.tripName && this.listOfTripNames.includes(editedTripName)){\r\n                    // the new trip name already exists\r\n                    trip.textContent = this.tripName;\r\n                }else{\r\n                    //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n                    this.$root.updateTripName(editedTripName);\r\n\r\n                    // TODO: update db with new name?\r\n                }\r\n                trip.setAttribute(\"contenteditable\", \"false\");\r\n            }\r\n        }\r\n    }\r\n    \r\n    // use this function to search for location via the Overpass API\r\n    // TODO: allow user to input a long and lat to search around?\r\n    // TODO: if we get Way elements in the response, can we match to a Node element? compare with results using https://overpass-turbo.eu/\r\n    searchLocationWithOverpass(): void {\r\n        const locationInput = (document.getElementById('nameOfLocation') as HTMLInputElement).value;\r\n\r\n        const locationTypeSelect: HTMLSelectElement = document.getElementById('typeOfLocation') as HTMLSelectElement;\r\n\r\n        if(locationInput && locationTypeSelect){\r\n            const locationType = locationTypeSelect.options[locationTypeSelect.selectedIndex].value;\r\n\r\n            // search for locations - this will update the map showing any results found\r\n            //@ts-ignore\r\n            this.$root.getSearchResultsFromOverpass(locationType, \"name\", locationInput).then(async (data) => {\r\n                this.dispatchEventToMap('showSearchResults', data);\r\n                \r\n                const modal = new Modal();\r\n                await modal.createMessageModal(`${data.length} result(s) found for: ${locationInput}`);\r\n            });\r\n        }\r\n    }\r\n    \r\n    clearSearchResults(): void {\r\n        this.dispatchEventToMap('clearSearchResults', []);\r\n    }\r\n    \r\n    async showHelpModal(): Promise<void> {\r\n        const modal = new Modal();\r\n        await modal.createMessageModal([\r\n            \"This feature allows you to search for a certain location by name using the Overpass API within a 20000m radius of the last destination in your list.\",\r\n            \"Currently you can only query for shops (e.g. Costco, Safeway, etc.) or amenities (e.g. McDonald's, see https://wiki.openstreetmap.org/wiki/Key:amenity) but hopefully more to come eventually!\"\r\n        ], true);\r\n    }\r\n\r\n    _handleIframeLogs(evt: Event): void {\r\n        console.log(evt);\r\n    }\r\n    \r\n    _handleReady(): void {\r\n        console.log(\"got iframe ready message!!\");\r\n        this.updateMap(this.listOfDest);\r\n\r\n        // this is false by default so not sure yet when this will ever happen\r\n        if(this.showSuggestedNextHops){\r\n            this.updateSuggestedNextHops(this.suggestedNextDests);\r\n        }\r\n    }\r\n    \r\n    mounted(): void {\r\n        // the iframe might not be ready?\r\n        // so listen for the ready event first\r\n        window.document.addEventListener('imready', this._handleReady, false);        \r\n        \r\n        // set up listeners for any messages that come from the iframe\r\n        window.document.addEventListener('iframeLogs', this._handleIframeLogs, false);\r\n        \r\n        // allow user to stop the trip title from being editable when clicking elsewhere other than the title text\r\n        window.document.addEventListener('click', this.toggleTripTitleEdit);\r\n    }\r\n}\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a4d5d9a6&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue, {CreateElement, VNode} from 'vue'\r\nimport App from './App.vue'\r\nimport axios from 'axios';\r\nimport { Modal } from './utils/modal';\r\nimport {\r\n    Destination,\r\n    DestinationSuggestion,\r\n    UserDestinationSuggestion,\r\n    Trip,\r\n    OverpassAPINode,\r\n    OverpassAPIData,\r\n    OverpassAPIOptions,\r\n    OverpassAPIDestinationSuggestion,\r\n    UserSelectedOptionsInModal\r\n} from './utils/triproute';\r\n\r\nVue.config.productionTip = false\r\n\r\n// root instance\r\nnew Vue({\r\n    render(h: CreateElement): VNode {\r\n        // TODO: fetch user's tripdata from db here??\r\n        return h(App, {\r\n            props: {\r\n                'listOfDest': this.tripData[this.currTripIndex].listOfDest,\r\n                'tripName': this.tripData[this.currTripIndex].tripName,\r\n                'listOfTripNames': this.tripData.map(trip => trip.tripName),\r\n                'suggestedNextDests': this.suggestedNextDests, // should be based on last destination in listOfDest\r\n                'appearanceOptions': this.appearanceOptions,\r\n            }\r\n        });\r\n    },\r\n    data: {\r\n        'tripData': [\r\n            {\r\n                'tripName': 'my first trip',\r\n                'listOfDest': [\r\n                    {\r\n                        \"name\": \"test\",\r\n                        \"latitude\": 38.9486650738765,\r\n                        \"longitude\": -77.01459411621002,\r\n                        \"notes\": \"hello world\",\r\n                        \"fromDate\": \"01-01-2020\",\r\n                        \"toDate\": \"01-05-2020\",\r\n                        \"images\": [] as string[],\r\n                        \"routeColor\": \"#888\"\r\n                    },\r\n                    {\r\n                        \"name\": \"test2\",\r\n                        \"latitude\": 38.982833520960156,\r\n                        \"longitude\": -76.95210937499908,\r\n                        \"notes\": \"hello world2\",\r\n                        \"fromDate\": \"01-05-2020\",\r\n                        \"toDate\": \"01-07-2020\",\r\n                        \"images\": [] as string[],\r\n                        \"routeColor\": \"#888\"\r\n                    }\r\n                ]\r\n            }\r\n        ],\r\n        'username': 'user1',\r\n        'currTripIndex': 0,\r\n        'suggestedNextDests': [] as DestinationSuggestion[],\r\n        'canGetSuggestedNextDests': false, // can get destinations from the database\r\n        'useOverpassAPI': false,           // flag for using overpass api for getting nearby locations\r\n        'overpassApiEntityToFind': \"restaurant\",\r\n        'overpassApiKeyToFind': \"amenity\",\r\n        'overpassApiEntityKeyMap': {\r\n            \"arts_centre\": \"amenity\",\r\n            \"library\": \"amenity\",\r\n            \"restaurant\": \"amenity\",\r\n            \"aquarium\": \"tourism\",\r\n            \"attraction\": \"tourism\",\r\n            \"hotel\": \"tourism\",\r\n            \"museum\": \"tourism\",\r\n        } as Record<string, string>,\r\n        'appearanceOptions': {\r\n            'showLocationLookup': false,\r\n            'showSuggestedDestinations': false,\r\n        },\r\n        // TODO: maybe we can pull these fake suggestions from a json file?\r\n        'fakeSuggestions': [\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place1\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 39.002833520960156,\r\n                \"longitude\": -76.55210937499908,\r\n                \"index\": 0,\r\n                \"metadata\": {\r\n                    \"notes\": \"hello world2 sdfsdf\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place2\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 39.048987979347004,\r\n                \"longitude\": -76.91640380859292,\r\n                \"index\": 1,\r\n                \"metadata\": {\r\n                    \"notes\": \"hello world2 sdfsdf sdfgsdfg\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place3\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 38.848987979347004,\r\n                \"longitude\": -77.01640380859292,\r\n                \"index\": 2,\r\n                \"metadata\": {\r\n                    \"notes\": \"hello world2 sdfsdf sdfgsdfg\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place4\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 37.948987979347004,\r\n                \"longitude\": -77.01640380859292,\r\n                \"index\": 3,\r\n                \"metadata\": {\r\n                    \"notes\": \"something\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n        ],\r\n    },\r\n    methods: {\r\n        // get next destination suggestions from database\r\n        requestSuggestedNextHops: function(lat: number, long: number): Promise<UserDestinationSuggestion[]> {\r\n            //console.log(\"requesting next hop suggestions\");\r\n            return new Promise((resolve) => {\r\n                // should be based on last destination in list\r\n                // use 20 km radius for now\r\n                axios.get(`http://localhost:8081/api/destinations?username=${this.username}&latitude=${lat}&longitude=${long}&radius=${20}`)\r\n                    .then(res => {\r\n                        const suggestedNextDestinations: UserDestinationSuggestion[] = res.data.destinations;\r\n                        resolve(suggestedNextDestinations);\r\n                    })\r\n                    .catch(error => {\r\n                        resolve([]); // database could not be connected to\r\n                    });\r\n            });\r\n        },\r\n        \r\n        findDestination: function(destName: string): boolean {\r\n            const listOfDest = this.tripData[this.currTripIndex].listOfDest;\r\n            for(const dest of listOfDest){\r\n                if(dest.name === destName){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        \r\n        removeDestination: function(destName: string): void {\r\n            const currDests = this.tripData[this.currTripIndex].listOfDest;\r\n            this.tripData[this.currTripIndex].listOfDest = currDests.filter(dest => dest.name !== destName);\r\n\t\t\t\r\n            // TODO: check to see if the last destination of the list was removed and if there is a new last destination. \r\n            // if so, take the current last dest and show next hop suggestions for that dest (if show next hops option selected)\r\n            // right now just handle when demoing\r\n            if(!this.canGetSuggestedNextDests){\r\n                this.suggestedNextDests = this.getFakeSuggestions();\r\n            }\r\n        },\r\n        \r\n        updateDestination: function(data: Destination): void {\r\n            // called from Destination.vue\r\n            // TODO: is there a better way to do this update?\r\n            const listOfDest = this.tripData[this.currTripIndex].listOfDest;\r\n            const currName = data.name;\r\n            let changeName = false;\r\n            let newName = \"\";\r\n\r\n            if(data.newName){\r\n                newName = data.newName; // new desired destination name\r\n\r\n                //@ts-ignore TODO: investigate this? (TS-2339)\r\n                const destWithNewNameExists = this.findDestination(newName);\r\n\r\n                if(currName !== newName && !destWithNewNameExists){\r\n                    changeName = true;\r\n                }else if(currName !== newName && destWithNewNameExists){\r\n                    // a destination with the new name already exists\r\n                    // just don't update the destination name but alert the user\r\n                    alert(\"Can't change name because a destination already exists with the same name!\");\r\n                }\r\n            }\r\n\r\n            for(let i = 0; i < listOfDest.length; i++){\r\n                const dest = listOfDest[i];\r\n                if(dest.name === currName){\r\n                    // TODO: just do for prop in dest, reassign?\r\n                    // so we don't have to manually update this each time there's a new prop\r\n                    dest.notes = data.notes;\r\n                    dest.fromDate = data.fromDate;\r\n                    dest.toDate = data.toDate;\r\n                    dest.images = data.images;\r\n                    dest.routeColor = data.routeColor;\r\n\r\n                    if(changeName){\r\n                        dest.name = newName;\r\n                    }else{\r\n                        dest.name = currName;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        \r\n        updateTripName: function(name: string): void {\r\n            if(!this.tripData.some((x: Trip) => x.tripName === name)){\r\n                // no other trip exists with this name so we can update\r\n                const currTrip = this.tripData[this.currTripIndex];\r\n                currTrip.tripName = name;\r\n                console.log(\"trip name updated\");\r\n            }\r\n        },\r\n        \r\n        // add new destination manually via button\r\n        addNewDestination(newDest: Destination): void {\r\n            // add the new destination to our current list\r\n            this.tripData[this.currTripIndex].listOfDest.push(newDest);\r\n            \r\n            // make sure map markers are updated\r\n            const updateMapEvent = new CustomEvent('updateMap', {detail: this.tripData[this.currTripIndex].listOfDest});\r\n            const mapIframe = document.getElementById('mapContainer') as HTMLIFrameElement;\r\n\r\n            if(mapIframe !== null && mapIframe.contentDocument !== null){\r\n                mapIframe.contentDocument.dispatchEvent(updateMapEvent);\r\n            }\r\n        },\r\n        \r\n        addNewTrip: function(name: string): void {\r\n            // TODO: check for existing trip name? allow duplicate names?\r\n            const newTrip = {\r\n                tripName: name,\r\n                listOfDest: []\r\n            };\r\n            this.tripData.push(newTrip);\r\n            this.currTripIndex = this.tripData.length - 1;\r\n        },\r\n        \r\n        selectTrip: function(tripIndex: number): void {\r\n            this.currTripIndex = tripIndex;\r\n        },\r\n\t\t\r\n        importData: function(evt: Event): void {\r\n            const reader = new FileReader();\r\n            const files = (evt.target as HTMLInputElement).files;\r\n            \r\n            if(files === null || files.length !== 1){\r\n                return;\r\n            }\r\n            \r\n            const file = files[0];\r\n            \r\n            if(file){\r\n                reader.onload = (() => {\r\n                    return (evt: Event): void => {\r\n                        const data: Array<Trip> = JSON.parse(reader.result as string); // should be a list of trips\r\n                        \r\n                        data.forEach(trip => {\r\n                            if(!trip.tripName || !trip.listOfDest){\r\n                                alert(\"sorry, trip data could not be imported! tripName and listOfDest fields must be provided for each trip.\");\r\n                                return;\r\n                            }\r\n                        });\r\n                        \r\n                        this.tripData = data;\r\n                        this.currTripIndex = 0;\r\n                    }\r\n                })();\r\n                \r\n                reader.readAsText(file);\r\n            }\r\n        },\r\n\t\t\r\n        exportData: async function(): Promise<void> {\r\n            const data = JSON.parse(JSON.stringify(this.tripData)); // make a copy\r\n            for(const trip of data) {\r\n                for(const dest of trip.listOfDest) {\r\n                    dest.images = []; // don't export images...for now?\r\n                }\r\n            }\r\n            const jsonData = JSON.stringify(data, null, 4);\r\n            const blob = new Blob([jsonData], { type: \"application/json\" });\r\n            const url = URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            \r\n            const modal = new Modal();\r\n            const filename = await modal.createInputModal(\"What would you like to name the exported file?\");\r\n\t\t\t\r\n            if(filename){\r\n                link.download = filename ? `${filename}.json` : \"trip-planner-data.json\";\r\n                link.click();\r\n            }\r\n        },\r\n        \r\n        // this opens a new tab displaying info for the currently-viewed trip in html\r\n        exportCurrTripHTML: function(): void {\r\n            // TODO: improve this some more\r\n            const currTripName = this.tripData[this.currTripIndex].tripName;\r\n            const style = \"<style>body{font-family:sans-serif;}</style>\";\r\n            \r\n            let html = `<!doctype html><html><head><title>${currTripName}</title>${style}</head><body><h1>${currTripName}</h1><hr /><br />`;\r\n            \r\n            let tripInfo = \"\";\r\n            \r\n            // add in the content\r\n            const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n            currTripDestList.forEach((destination) => {\r\n                // generate notes, taking into account any line breaks\r\n                const notes = destination.notes.split('\\n').map(note => `<p>${note}</p>`).join('');\r\n\r\n                const latLngMatch = destination.notes.match(/@[0-9]+.[0-9]+,[0-9]+.[0-9]+/g);\r\n                if(latLngMatch){\r\n                    // add embedded map if we can extract a location\r\n                    // possible use-case: user puts approximate destination to map but adds actual Google Maps\r\n                    // location url in notes for later reference\r\n                    const location = latLngMatch[0].substring(1);\r\n                    const embeddedMap = `<iframe src='https://maps.google.com/maps?&q=${location}&output=embed' width='425' height='350' frameborder='0'  \r\n        scrolling='no' marginheight='0' marginwidth='0'></iframe>`;\r\n                    tripInfo = `<h2>${destination.name}</h2><h3>from: ${destination.fromDate}, to: ${destination.toDate}</h3>${notes}${embeddedMap}<br />`;\r\n                }else{\r\n                    // use provided lat and lng to show location on embedded map\r\n                    const embeddedMap = `<iframe src='https://maps.google.com/maps?&q=${destination.latitude},${destination.longitude}&output=embed' width='425' height='350' frameborder='0'  \r\n        scrolling='no' marginheight='0' marginwidth='0'></iframe>`;                    \r\n                    tripInfo = `<h2>${destination.name}</h2><h3>from: ${destination.fromDate}, to: ${destination.toDate}</h3>${notes}${embeddedMap}<br />`;\r\n                }\r\n                \r\n                html += tripInfo;\r\n            });\r\n            \r\n            html += '</body></html>';\r\n            \r\n            // note: at least in chrome, it seems that the url of the opened tab will be about:blank\r\n            // even though I set the url set for window.open(). sometimes it does appear to set the tab's url as expected\r\n            // but not all the time? :shrug:\r\n            //\r\n            // when it's about:blank you can't save the html :( https://issues.chromium.org/issues/40339736\r\n            // but it works properly in Firefox at least\r\n            const tab = window.open(`${window.location.href}${currTripName}`, '_blank');\r\n            if(tab){\r\n                tab.document.write(html);\r\n                tab.document.close();\r\n            }\r\n        },\r\n\r\n        getFakeSuggestions: function(): Array<UserDestinationSuggestion> {\r\n            // filter based on proximity (this is just for when using fake data. the database is supposed to\r\n            // handle finding the closest destinations)\r\n            const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n            if(currTripDestList.length){\r\n                const lat = (currTripDestList[currTripDestList.length-1].latitude * Math.PI) / 180;\r\n                const lng = (currTripDestList[currTripDestList.length-1].longitude * Math.PI) / 180;\r\n                \r\n                const newSuggestions = this.fakeSuggestions.filter((x: UserDestinationSuggestion) => {\r\n                    const lngRad = (x.longitude * Math.PI) / 180;\r\n                    const latRad = (x.latitude * Math.PI) / 180;\r\n                    return Math.acos(Math.sin(lat) * Math.sin(latRad) + Math.cos(lat) * Math.cos(latRad) * Math.cos(lng - lngRad)) * 6371 <= 20;\r\n                });\r\n                \r\n                return newSuggestions;\r\n            }else{\r\n                return [];\r\n            }\r\n        },\r\n\r\n        _makeOverpassRequest: function(query: string): Promise<OverpassAPIDestinationSuggestion[]> {\r\n            const url = \"https://overpass-api.de/api/interpreter\";\r\n            const config = {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n                }\r\n            };\r\n            \r\n            function getResults(responseData: OverpassAPIData): OverpassAPIDestinationSuggestion[] {\r\n                const elements = responseData.elements;\r\n                console.log(elements);\r\n                return elements.filter(x => x.tags && x.lon && x.lat).map((el: OverpassAPINode) => {\r\n                    // TODO: add address if available (e.g. addr:city, addr:street, addr:state, etc.)\r\n                    // TODO: maybe let tag info be optional? also, sometimes \"way\" elements are actual places - can we derive long and lat from its nodes maybe?\r\n                    return {\r\n                        'latitude': el.lat,\r\n                        'longitude': el.lon,\r\n                        'destname': el.tags.name,\r\n                        'website': el.tags.website,\r\n                        'type': el.tags.tourism\r\n                    };\r\n                });\r\n            }\r\n            \r\n            return new Promise((resolve) => {\r\n                axios.post<OverpassAPIData>(url, `data=${query}`, config).then(response => {\r\n                    //console.log(getResults(response));\r\n                    resolve(getResults(response.data));\r\n                });\r\n            });\r\n        },\r\n\r\n        // TODO: allow user to set radius?\r\n        // keyType is like 'amenity' or 'tourism'\r\n        // entity is like 'restaurant' or 'museum'\r\n        getLocationsFromOverpass: function(lat: number, long: number, keyType: string, entity: string): Promise<OverpassAPIDestinationSuggestion[]> {\r\n            /*\r\n                url-decoded query for finding a certain entity within a 20000m radius\r\n\r\n                [out:json][timeout:25];\r\n                (\r\n                node[\"${keyType}\"=\"${entity}\"](around:20000,${lat},+${long});\r\n                );\r\n                out+body+5;\r\n                >;\r\n                out+skel+qt;\r\n            */\r\n            const query = `%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A(%0Anode%5B%22${keyType}%22%3D%22${entity}%22%5D(around%3A20000%2C${lat}%2C+${long})%3B%0A)%3B%0Aout+body+5%3B%0A%3E%3B%0Aout+skel+qt%3B`;\r\n\r\n            return this._makeOverpassRequest(query);\r\n        },\r\n\r\n        // TODO: allow user to set radius?\r\n        searchLocationsFromOverpass: function(lat: number, long: number, keyType: string, property: string, valueToFind: string): Promise<OverpassAPIDestinationSuggestion[]> {\r\n            // find a shop with name as Costco (can also do \"operator\"= or \"brand\"=). nwr = node, way, relation\r\n            // %5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A(%0A++nwr%5B%22shop%22%5D%5B%22name%22%3D%22Costco%22%5D(around%3A20000%2C38.982833520960156%2C-76.95210937499908)%3B%0A)%3B%0Aout+body%3B%0A%3E%3B%0Aout+skel+qt%3B\r\n            /*\r\n                [out:json][timeout:25];\r\n                (\r\n                  nwr[\"shop\"][\"name\"=\"Costco\"](around:20000,38.982833520960156,-76.95210937499908);\r\n                );\r\n                out body;\r\n                >;\r\n                out skel qt;\r\n            */\r\n            // keyType = shop, tourism, amenity\r\n            // property = name or operator or brand\r\n            // valueToFind\r\n            const query = `%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A(%0A++nwr%5B%22${keyType}%22%5D%5B%22${property}%22%3D%22${valueToFind}%22%5D(around%3A20000%2C${lat}%2C${long})%3B%0A)%3B%0Aout+body%3B%0A%3E%3B%0Aout+skel+qt%3B`;\r\n\r\n            return this._makeOverpassRequest(query);\r\n        },\r\n\r\n        getSuggestionsFromOverpass: function(keyType: string, entity: string): Promise<Array<OverpassAPIDestinationSuggestion>> {\r\n            const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n            return this.getLocationsFromOverpass(\r\n                currTripDestList[currTripDestList.length-1].latitude,\r\n                currTripDestList[currTripDestList.length-1].longitude,\r\n                keyType,\r\n                entity\r\n            );\r\n        },\r\n        \r\n        getSearchResultsFromOverpass: function(keyType: string, property: string, valueToFind: string): Promise<Array<OverpassAPIDestinationSuggestion>> {\r\n            const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n            return this.searchLocationsFromOverpass(\r\n                currTripDestList[currTripDestList.length-1].latitude,\r\n                currTripDestList[currTripDestList.length-1].longitude,\r\n                keyType,\r\n                property,\r\n                valueToFind\r\n            );\r\n        },\r\n\r\n        setOverpassApiUse: function(val: boolean, entity: string): void {\r\n            this.useOverpassAPI = val;\r\n            if(val){\r\n                const overpassApiEntityKeyMap = this.overpassApiEntityKeyMap;\r\n                if(entity){\r\n                    this.overpassApiEntityToFind = entity;\r\n                    this.overpassApiKeyToFind = overpassApiEntityKeyMap[entity];\r\n                    \r\n                    this.getSuggestionsFromOverpass(this.overpassApiKeyToFind, this.overpassApiEntityToFind).then((data) => {\r\n                        this.suggestedNextDests = data;\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        \r\n        updateAppearancePerOptions: function(options: UserSelectedOptionsInModal): void {\r\n            this.appearanceOptions.showLocationLookup = options[\"showLocationLookup\"];\r\n            this.appearanceOptions.showSuggestedDestinations = options[\"showSuggestedDestinations\"];\r\n            this.changeStyleTheme(options[\"theme\"]);\r\n        },\r\n        \r\n        // get the Overpass API entity options available to search for\r\n        getCurrentOverpassAPIOptions: function(): OverpassAPIOptions {\r\n            return {\r\n                useOverpassAPI: this.useOverpassAPI,\r\n                selectedOverpassApiEntity: this.overpassApiEntityToFind,\r\n                overpassEntities: Object.keys(this.overpassApiEntityKeyMap),\r\n            };\r\n        },\r\n        \r\n        getNextDestSuggestions: function(): void {\r\n            if(this.useOverpassAPI){\r\n                //@ts-ignore TODO: investigate this? (TS-2339)\r\n                this.getSuggestionsFromOverpass(this.overpassApiKeyToFind, this.overpassApiEntityToFind).then((data) => {\r\n                    this.suggestedNextDests = data;\r\n                });\r\n            }else{\r\n                //@ts-ignore TODO: investigate this? (TS-2339)\r\n                this.suggestedNextDests = this.getFakeSuggestions();\r\n            }\r\n        },\r\n        \r\n        // update the map style\r\n        changeMapStyle(mapStyleName: string): void {\r\n            // send a custom event to the map iframe along with the mapStyleName\r\n            const updateMapEvent = new CustomEvent('changeMapStyle', {detail: mapStyleName});\r\n            const mapIframe = document.getElementById('mapContainer') as HTMLIFrameElement;\r\n\r\n            if(mapIframe !== null && mapIframe.contentDocument !== null){\r\n                mapIframe.contentDocument.dispatchEvent(updateMapEvent);\r\n            }\r\n        },\r\n        \r\n        // update the style theme\r\n        // TODO: store theme data somewhere else?\r\n        changeStyleTheme(themeName: string): void {\r\n            if(themeName === \"pastel\"){\r\n                document.documentElement.style.setProperty('--menu-header-bg-color', 'var(--pale-yellow)');\r\n                document.documentElement.style.setProperty('--destination-bg-color', 'var(--yellow-green)');\r\n                document.documentElement.style.setProperty('--column-1-bg-color', 'var(--pale-blue)');\r\n                document.documentElement.style.setProperty('--column-2-bg-color', 'var(--pale-yellow)');\r\n                document.documentElement.style.setProperty('--destination-list-bg-color', 'var(--pale-orange)');\r\n            }else if(themeName === \"gray\"){\r\n                document.documentElement.style.setProperty('--menu-header-bg-color', 'var(--light-gray)');\r\n                document.documentElement.style.setProperty('--destination-bg-color', 'var(--white)');\r\n                document.documentElement.style.setProperty('--column-1-bg-color', 'var(--light-gray)');\r\n                document.documentElement.style.setProperty('--column-2-bg-color', 'var(--grayish-red)');\r\n                document.documentElement.style.setProperty('--destination-list-bg-color', 'var(--light-grayish-orange)');\r\n            }else if(themeName === \"beach\"){\r\n                // https://colorhunt.co/palette/9ac5f499dbf5a7eceeffeebb\r\n                document.documentElement.style.setProperty('--menu-header-bg-color', 'var(--soft-blue)');\r\n                document.documentElement.style.setProperty('--destination-bg-color', 'var(--sky-blue)');\r\n                document.documentElement.style.setProperty('--column-1-bg-color', 'var(--sky-blue)');\r\n                document.documentElement.style.setProperty('--column-2-bg-color', 'var(--pale-turquoise)');\r\n                document.documentElement.style.setProperty('--destination-list-bg-color', 'var(--oasis)');\r\n            }\r\n        },\r\n    },\r\n\t\r\n    mounted: function(): void {\r\n        // listen for the custom event 'addDest' from the iframe (which is the map)\r\n        // every time we add a new destination and the user wants next destination suggestions,\r\n        // we make a call to the API server to fetch those suggestions.\r\n        document.addEventListener('addDest', (evt) => {\r\n            // if adding a new destination was successful to the iframe map, a custom addDest event will be\r\n            // emitted from the iframe along with that new destination's data, which gets received here.\r\n            const location = (evt as CustomEvent).detail;\r\n\r\n            if(location){\r\n                const newDest: Destination = {\r\n                    name: location.name,\r\n                    latitude: location.latitude,\r\n                    longitude: location.longitude,\r\n                    toDate: \"\",\r\n                    fromDate: \"\",\r\n                    notes: \"\",\r\n                    images: [],\r\n                    routeColor: \"#888\"\r\n                };\r\n\t\t\t\t\r\n                if(this.canGetSuggestedNextDests && !this.useOverpassAPI){\r\n                    // Make a call to the db with the newly added dest's lat and lng to look up possible next hops\r\n                    // when we get that info back, update the prop so the change will get propagated to TripRoute.vue.\r\n                    this.requestSuggestedNextHops(location.latitude, location.longitude).then((data: DestinationSuggestion[]) => {\r\n                        this.suggestedNextDests = data;\r\n                        this.tripData[this.currTripIndex].listOfDest.push(newDest);\r\n                    });\t\t\t\t\t\r\n                }else{\r\n                    // for demoing\r\n                    this.tripData[this.currTripIndex].listOfDest.push(newDest);\r\n                    this.getNextDestSuggestions();\r\n                }\r\n            }\r\n        });\r\n\r\n        // make a call for all the trip info for this user\r\n        // for now use 'user1' as the username to demo\r\n        axios.get(`http://localhost:8081/api/user-destinations/${this.username}`)\r\n            .then(res => {\r\n                this.tripData = res.data.trips;       // get user's trips\r\n                this.canGetSuggestedNextDests = true; // since we can connect to the database\r\n\r\n                // get suggested next hops using the currently last destination in the current trip\r\n                const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n                const lat = currTripDestList[currTripDestList.length-1].latitude;\r\n                const lng = currTripDestList[currTripDestList.length-1].longitude;\r\n\r\n                this.requestSuggestedNextHops(lat, lng).then((data: DestinationSuggestion[]) => {\r\n                    this.suggestedNextDests = data;\r\n                });\r\n            })\r\n            .catch(error => {\r\n                // database couldn't be connected to\r\n                // we can't get suggested next hops when a new destination is added\r\n                // use fake data instead for now\r\n                this.getNextDestSuggestions();\r\n            });\r\n    }\r\n}).$mount('#app') // #app is in /public/index.html\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsModal.vue?vue&type=style&index=0&id=7d07ca06&scoped=true&lang=css&\""],"sourceRoot":""}