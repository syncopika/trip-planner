{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Calendar.vue?7882","webpack:///./src/components/TripRoute.vue?cc3c","webpack:///./src/components/Destination.vue?d429","webpack:///./src/components/Navigation.vue?2db2","webpack:///./src/App.vue?748d","webpack:///./src/components/TripRoute.vue?dfb1","webpack:///./src/components/DestinationList.vue?14ea","webpack:///./src/components/Destination.vue?a9d1","webpack:///./src/components/Calendar.vue?d0fa","webpack:///./src/components/Calendar.vue","webpack:///./src/components/Calendar.vue?3b63","webpack:///./src/components/Calendar.vue?4d81","webpack:///./src/utils/modal.ts","webpack:///./src/components/Destination.vue","webpack:///./src/components/Destination.vue?badc","webpack:///./src/components/Destination.vue?b784","webpack:///./src/components/DestinationList.vue","webpack:///./src/components/DestinationList.vue?e457","webpack:///./src/components/DestinationList.vue?d77d","webpack:///./src/components/Navigation.vue?ee8b","webpack:///./src/components/Navigation.vue","webpack:///./src/components/Navigation.vue?3e2d","webpack:///./src/components/Navigation.vue?8f5e","webpack:///./src/components/TripRoute.vue","webpack:///./src/components/TripRoute.vue?8185","webpack:///./src/components/TripRoute.vue?4711","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","listOfDest","tripName","listOfTripNames","suggestedNextDests","staticRenderFns","_m","_v","on","toggleTripSuggestions","_l","nextDest","index","_s","_e","handleUpdateOptions","staticClass","onDrop","$event","preventDefault","destObj","latitude","longitude","destination","highlightBorder","dehighlightBorder","onDragStart","toggleVisibility","removeDestination","ref","fromDate","isEditing","toDate","domProps","notes","image","staticStyle","target","style","border","enlargeImage","deleteImage","routeColor","showColorWheel","toggleEdit","uploadImage","clickInput","saveChanges","cancelChanges","header","destName","date","replaceAll","extend","props","required","type","String","Boolean","methods","getDateInfo","month","document","getElementById","day","year","updated","dateParts","split","component","modalStyle","position","top","left","transform","zIndex","textAlign","padding","backgroundColor","width","height","boxShadow","modalOverlayStyle","opacity","createInputModal","text","modal","createElement","id","assign","displayText","textContent","marginBottom","textInput","appendChild","submitBtn","innerText","cancelBtn","modalOverlay","body","Promise","resolve","reject","onclick","inputText","trim","undefined","finally","removeChild","createMessageModal","okBtn","createQuestionModal","createOptionsModal","currOptions","overpassApiEnabled","useOverpassAPI","selectedOverpassApiEntity","destinationSuggestionSourceText","databaseOption","checked","databaseOptionLabel","htmlFor","fontSize","overpassApiOption","overpassApiOptionLabel","overpassApiSelect","margin","disabled","forEach","opt","selected","overpassApiSelectLabel","addEventListener","evt","mapTypeSelect","mapTypeSelectLabel","marginTop","expanded","editSnapshot","currDestTitle","components","Calendar","dest","content","display","stopPropagation","JSON","parse","stringify","destTitle","setAttribute","removeAttribute","Modal","remove","$root","newName","$refs","routeColorInput","colorWheel","parentNode","updateDestination","currData","img","Image","reader","FileReader","files","file","onloadend","imgSrcStr","src","images","readAsDataURL","inputElement","click","imageDiv","overflow","enlargedImage","clientHeight","clientWidth","cancel","fontFamily","fontWeight","color","imageIndexStr","imageIndex","parseInt","location","colorWheelId","size","colorWheelContext","getContext","x","y","radius","angle","startAngle","Math","PI","endAngle","beginPath","moveTo","arc","closePath","gradient","createRadialGradient","addColorStop","fillStyle","fill","stroke","e","offsetX","offsetY","colorPicked","getImageData","colorCode","colorInput","thisEl","dataTransfer","dropEffect","effectAllowed","setData","currDragElementId","getData","currDraggedElementIndex","findIndex","targetElementIndex","DestinationList","Destination","addNewTrip","selectTrip","triggerImport","importData","exportData","openOptions","Array","modalHandler","newTripName","confirm","importButton","saveData","changeMapStyle","mapStyleName","updateMapEvent","CustomEvent","detail","mapIframe","contentDocument","dispatchEvent","getCurrentOptions","$emit","showSuggestedNextHops","onDestChange","newVal","_","updateMap","updateSuggestedNextHops","onSuggestedDestChange","dispatchEventToMap","eventName","dataSource","setOverpassApiUse","overpassApiEntity","toggleTripTitleEdit","el","classList","contains","trip","querySelector","editedTripName","includes","updateTripName","_handleIframeLogs","console","log","_handleReady","mounted","deep","TripRouteMap","Navigation","App","config","productionTip","render","h","tripData","currTripIndex","map","requestSuggestedNextHops","lat","long","a","username","then","res","suggestedNextDestinations","destinations","catch","error","findDestination","currDests","filter","canGetSuggestedNextDests","getFakeSuggestions","currName","changeName","destWithNewNameExists","alert","some","currTrip","newTrip","tripIndex","onload","readAsText","jsonData","blob","Blob","url","URL","createObjectURL","link","href","filename","download","currTripDestList","newSuggestions","fakeSuggestions","lngRad","latRad","acos","sin","cos","getLocationsFromOverpass","keyType","entity","query","headers","getResults","response","elements","lon","tags","tourism","post","getSuggestionsFromOverpass","val","overpassApiEntityKeyMap","overpassApiEntityToFind","overpassApiKeyToFind","trips","lng","$mount"],"mappings":"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","file":"js/app.58a61b41.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/trip-planner/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=style&index=0&id=7c9ce71d&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripRoute.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Destination.vue?vue&type=style&index=0&id=2ce103ec&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=style&index=0&id=38c46b04&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('trip-route-map',{attrs:{\"list-of-dest\":_vm.listOfDest,\"trip-name\":_vm.tripName,\"list-of-trip-names\":_vm.listOfTripNames,\"suggestedNextDests\":_vm.suggestedNextDests}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"column1\"}},[_vm._m(0),_c('div',{attrs:{\"id\":\"suggestions\"}},[_c('label',{attrs:{\"for\":\"tripSuggestionsOption\"}},[_vm._v(\" show suggestions for next dest in trip route? \")]),_c('select',{attrs:{\"id\":\"tripSuggestionsOption\"},on:{\"change\":_vm.toggleTripSuggestions}},[_c('option',{attrs:{\"value\":\"yes\"}},[_vm._v(\" yes please! \")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"no\"}},[_vm._v(\" no thanks \")])]),(_vm.showSuggestedNextHops)?_c('div',[_c('h3',[_vm._v(\" check out these suggestions! \")]),_c('ul',_vm._l((_vm.suggestedNextDests),function(nextDest,index){return _c('li',{key:'li_nextDest_' + index},[_c('p',[_vm._v(_vm._s(nextDest))])])}),0)]):_vm._e()])]),_c('div',{attrs:{\"id\":\"column2\"}},[_c('navigation',{attrs:{\"list-of-trip-names\":_vm.listOfTripNames},on:{\"update-options\":_vm.handleUpdateOptions}}),_c('div',{attrs:{\"id\":\"tripInfo\"}},[_c('h1',{staticClass:\"tripTitle\"},[_vm._v(_vm._s(_vm.tripName))]),_c('destinationList',{attrs:{\"list-of-dest\":_vm.listOfDest}})],1),_vm._m(1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('iframe',{attrs:{\"id\":\"mapContainer\",\"src\":\"./mapIframe.html\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"footer\"}},[_c('p',[_vm._v(\" footer \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{attrs:{\"id\":\"stops\"},on:{\"drop\":_vm.onDrop,\"dragover\":function($event){$event.preventDefault();},\"dragenter\":function($event){$event.preventDefault();}}},_vm._l((_vm.listOfDest),function(destObj){return _c('destination',{key:destObj.name + destObj.latitude + destObj.longitude,attrs:{\"destination\":destObj}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"dest\",attrs:{\"id\":_vm.destination.name + '_dest',\"draggable\":\"\"},on:{\"mouseover\":_vm.highlightBorder,\"mouseleave\":_vm.dehighlightBorder,\"dragstart\":_vm.onDragStart}},[_c('h1',{attrs:{\"id\":_vm.destination.name},on:{\"click\":_vm.toggleVisibility}},[_vm._v(\" \"+_vm._s(_vm.destination.name)+\" \")]),_c('p',{staticClass:\"delete\",attrs:{\"id\":_vm.destination.name + '_delete'},on:{\"click\":_vm.removeDestination}},[_vm._v(\" x \")]),_c('div',{staticClass:\"content\",attrs:{\"id\":_vm.destination.name + '_content'}},[_c('div',{attrs:{\"id\":_vm.destination.name + '_dates'}},[_c('div',{staticClass:\"row\"},[_c('Calendar',{ref:_vm.destination.name + '_fromDate',attrs:{\"dest-name\":_vm.destination.name + '_from_',\"date\":_vm.destination.fromDate,\"is-editing\":_vm.isEditing,\"header\":'to'}})],1),_c('div',{staticClass:\"row\"},[_c('Calendar',{ref:_vm.destination.name + '_toDate',attrs:{\"dest-name\":_vm.destination.name + '_to_',\"date\":_vm.destination.toDate,\"is-editing\":_vm.isEditing,\"header\":'from'}})],1)]),_c('h3',[_vm._v(\" notes: \")]),_c('div',[_c('textarea',{attrs:{\"id\":_vm.destination.name + '_notes',\"rows\":\"5\",\"cols\":\"50\",\"disabled\":\"\"},domProps:{\"value\":_vm.destination.notes}}),_c('br')]),_c('br'),_c('h3',[_vm._v(\" images: \")]),_c('div',{attrs:{\"id\":_vm.destination.name + '_images'}},_vm._l((_vm.destination.images),function(image,index){return _c('div',{key:'div_' + _vm.destination.name + '_image_' + index,staticClass:\"imageContainer\",staticStyle:{\"margin-right\":\"2px\"}},[_c('img',{key:_vm.destination.name + '_image_' + index,attrs:{\"src\":image},on:{\"mouseover\":function($event){$event.target.style.border='1px solid #e0ffff'},\"mouseout\":function($event){$event.target.style.border='1px solid #000'},\"dblclick\":function($event){return _vm.enlargeImage($event)}}}),(_vm.isEditing)?_c('h3',{staticStyle:{\"color\":\"red\"},attrs:{\"id\":'delete_' + _vm.destination.name + '_image_' + index},on:{\"click\":function($event){return _vm.deleteImage($event)}}},[_vm._v(\" x \")]):_vm._e()])}),0),_c('br'),(_vm.isEditing)?_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"id\":_vm.destination.name + '_editRouteColor'}},[_c('label',{attrs:{\"for\":_vm.destination.name + '_routeColor'}},[_vm._v(\" route color: \")]),_c('input',{style:('background-color: ' + _vm.destination.routeColor),attrs:{\"id\":_vm.destination.name + '_routeColor',\"name\":_vm.destination.name + '_routeColor',\"type\":\"text\",\"size\":\"7\"},domProps:{\"value\":_vm.destination.routeColor}}),_c('button',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":_vm.destination.name + '_routeColor_btn'},on:{\"click\":_vm.showColorWheel}},[_vm._v(\" show color wheel \")])]):_vm._e(),(!_vm.isEditing)?_c('h3',[_vm._v(\" route color: \"),_c('span',{style:('background-color: ' + _vm.destination.routeColor)},[_vm._v(_vm._s(_vm.destination.routeColor))])]):_vm._e(),_c('hr'),_c('p',{staticClass:\"latlng\"},[_vm._v(\" lat: \"+_vm._s(_vm.destination.latitude)+\", long: \"+_vm._s(_vm.destination.longitude)+\" \")]),(!_vm.isEditing)?_c('button',{on:{\"click\":_vm.toggleEdit}},[_vm._v(\" edit \")]):_vm._e(),_c('input',{staticClass:\"inputFile\",attrs:{\"type\":\"file\",\"accept\":\"image/*\",\"id\":_vm.destination.name + '_importImage'},on:{\"change\":_vm.uploadImage}}),(_vm.isEditing)?_c('button',{on:{\"click\":_vm.clickInput}},[_vm._v(\" upload image \")]):_vm._e(),(_vm.isEditing)?_c('button',{staticClass:\"editButton\",on:{\"click\":_vm.saveChanges}},[_vm._v(\" save \")]):_vm._e(),(_vm.isEditing)?_c('button',{staticClass:\"editButton\",on:{\"click\":_vm.cancelChanges}},[_vm._v(\" cancel \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isEditing)?_c('div',{staticClass:\"calendar\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.header)+\": \")]),_c('input',{attrs:{\"id\":_vm.destName + 'month',\"type\":\"text\",\"size\":\"2\",\"maxlength\":\"2\",\"placeholder\":\"mm\"}}),_c('p',[_vm._v(\" / \")]),_c('input',{attrs:{\"id\":_vm.destName + 'day',\"type\":\"text\",\"size\":\"2\",\"maxlength\":\"2\",\"placeholder\":\"dd\"}}),_c('p',[_vm._v(\" / \")]),_c('input',{attrs:{\"id\":_vm.destName + 'year',\"type\":\"text\",\"size\":\"4\",\"maxlength\":\"4\",\"placeholder\":\"yyyy\"}})]):_vm._e(),(!_vm.isEditing)?_c('div',{staticClass:\"calendar\"},[_c('h3',[_vm._v(_vm._s(_vm.header)+\": \"+_vm._s(_vm.date.length === 2 ? \"\" : _vm.date.replaceAll(\"-\", \"/\"))+\" \")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\n\r\nexport default Vue.extend({\r\n    data(){\r\n        return {}\r\n    },\r\n    props: {\r\n        destName: { required: true, type: String },\r\n        isEditing: { required: true, type: Boolean },\r\n        date: { required: true, type: String },\r\n        header: { required: true, type: String },\r\n    },\r\n    methods: {\r\n        getDateInfo: function(): {month: string; day: string; year: string} {\r\n            const destName = this.destName;\r\n            const month: HTMLInputElement = document.getElementById(destName + \"month\") as HTMLInputElement;\r\n            const day: HTMLInputElement = document.getElementById(destName + \"day\") as HTMLInputElement;\r\n            const year: HTMLInputElement = document.getElementById(destName + \"year\") as HTMLInputElement;\r\n            return {\r\n                month: month.value,\r\n                day: day.value,\r\n                year: year.value\r\n            };\r\n        }\r\n    },\r\n    updated: function(){\r\n        if(this.date && this.isEditing){\r\n            // show the input fields with the date filled in\r\n            const dateParts = this.date.split(\"-\"); // dates should be delimited by \"-\"\r\n            const destName = this.destName;\r\n\r\n            const month: HTMLInputElement = document.getElementById(destName + \"month\") as HTMLInputElement;\r\n            const day: HTMLInputElement = document.getElementById(destName + \"day\") as HTMLInputElement;\r\n            const year: HTMLInputElement = document.getElementById(destName + \"year\") as HTMLInputElement;\r\n\r\n            if(month && dateParts.length > 0) month.value = dateParts[0];\r\n            if(day && dateParts.length > 1) day.value = dateParts[1];\r\n            if(year && dateParts.length > 2) year.value = dateParts[2];\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Calendar.vue?vue&type=template&id=7c9ce71d&scoped=true&\"\nimport script from \"./Calendar.vue?vue&type=script&lang=ts&\"\nexport * from \"./Calendar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Calendar.vue?vue&type=style&index=0&id=7c9ce71d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c9ce71d\",\n  null\n  \n)\n\nexport default component.exports","export class Modal {\r\n    \r\n    modalStyle: Record<string, string>;\r\n    modalOverlayStyle: Record<string, string>;\r\n\r\n    constructor(){\r\n        this.modalStyle = {\r\n            position: \"fixed\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            zIndex: \"1010\",\r\n            textAlign: \"center\",\r\n            padding: \"8px\",\r\n            backgroundColor: \"#fff\",\r\n            width: \"20%\",\r\n            height: \"auto\",\r\n            boxShadow: \"2px 2px 5px #ccc\",\r\n            border: \"1px solid #ccc\",\r\n        };\r\n        \r\n        this.modalOverlayStyle = {\r\n            zIndex: \"1000\",\r\n            position: \"fixed\",\r\n            top: \"0\",\r\n            left: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: \"#aaa\",\r\n            opacity: \"0.2\",\r\n        };\r\n    }\r\n\r\n    // modal for accepting text input\r\n    createInputModal(text: string): Promise<string> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle); // add attributes from this.modalStyle to modal.style\r\n        \r\n        const displayText = document.createElement('p');\r\n        displayText.textContent = text;\r\n        displayText.style.marginBottom = \"0px\";\r\n        \r\n        const textInput = document.createElement('input');\r\n        textInput.type = \"text\";\r\n        \r\n        modal.appendChild(displayText);\r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(textInput);\r\n        \r\n        const submitBtn = document.createElement('button');\r\n        submitBtn.innerText = \"submit\";\r\n        \r\n        const cancelBtn = document.createElement('button');\r\n        cancelBtn.innerText = \"cancel\";\r\n        \r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(submitBtn);\r\n        modal.appendChild(cancelBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<string>((resolve, reject) => {\r\n            submitBtn.onclick = (): void => {\r\n                const inputText = textInput.value.trim();\r\n                resolve(inputText);\r\n            };\r\n            \r\n            cancelBtn.onclick = (): void => {\r\n                resolve(undefined);\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n\r\n    // just a textbox with an ok button\r\n    createMessageModal(text: string): Promise<boolean> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle);\r\n        \r\n        //const text = document.createElement('h2');\r\n        const displayText = document.createElement('p');\r\n        displayText.textContent = text;\r\n        \r\n        modal.appendChild(displayText);\r\n        \r\n        const okBtn = document.createElement('button');\r\n        okBtn.innerText = \"ok\";\r\n        modal.appendChild(okBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<boolean>((resolve) => {\r\n            okBtn.onclick = (): void => {\r\n                resolve(true);\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n    \r\n    // modal for asking a question. has an ok and cancel button.\r\n    createQuestionModal(text: string): Promise<boolean> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle);\r\n        \r\n        const displayText = document.createElement('p');\r\n        displayText.textContent = text;\r\n        \r\n        modal.appendChild(displayText);\r\n        \r\n        const okBtn = document.createElement('button');\r\n        okBtn.innerText = \"ok\";\r\n        \r\n        const cancelBtn = document.createElement('button');\r\n        cancelBtn.innerText = \"cancel\";\r\n        \r\n        modal.appendChild(okBtn);\r\n        modal.appendChild(cancelBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<boolean>((resolve) => {\r\n            okBtn.onclick = (): void => {\r\n                resolve(true);\r\n            };\r\n            cancelBtn.onclick = (): void => {\r\n                resolve(false);\r\n            };\r\n        }).finally((): void => {\r\n            // make sure to close modal\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n    \r\n    // TODO: make new type for options? instead of Record<string, string>\r\n    createOptionsModal(currOptions: Record<string, any>): Promise<Record<string, string>> {\r\n        const modal = document.createElement('div');\r\n        modal.id = \"modal\";\r\n        Object.assign(modal.style, this.modalStyle);\r\n        \r\n        // get current option values so we can set them\r\n        const overpassApiEnabled: boolean = currOptions.useOverpassAPI;\r\n        const selectedOverpassApiEntity: string = currOptions.selectedOverpassApiEntity;\r\n\r\n        const displayText = document.createElement('h1');\r\n        displayText.textContent = \"options\";\r\n        \r\n        modal.appendChild(displayText);\r\n        modal.appendChild(document.createElement('hr'));\r\n        \r\n        const destinationSuggestionSourceText = document.createElement('p');\r\n        destinationSuggestionSourceText.textContent = \"choose source for destination suggestions:\";\r\n        modal.appendChild(destinationSuggestionSourceText);\r\n        \r\n        // database option radio button\r\n        const databaseOption = document.createElement('input');\r\n        databaseOption.type = \"radio\";\r\n        databaseOption.name = \"destinationSuggestionSource\";\r\n        databaseOption.value = \"database\";\r\n        databaseOption.id = \"databaseOption\";\r\n        databaseOption.checked = !overpassApiEnabled;\r\n        \r\n        const databaseOptionLabel = document.createElement('label');\r\n        databaseOptionLabel.textContent = \"other users from database\";\r\n        databaseOptionLabel.htmlFor = \"databaseOption\";\r\n        databaseOptionLabel.style.fontSize = \"18px\";\r\n        \r\n        modal.appendChild(databaseOption);\r\n        modal.appendChild(databaseOptionLabel);\r\n        modal.appendChild(document.createElement('br'));\r\n        \r\n        // overpass api radio button\r\n        const overpassApiOption = document.createElement('input');\r\n        overpassApiOption.type = \"radio\";\r\n        overpassApiOption.name = \"destinationSuggestionSource\";\r\n        overpassApiOption.value = \"overpassApi\";\r\n        overpassApiOption.id = \"overpassApiOption\";\r\n        overpassApiOption.checked = overpassApiEnabled;\r\n        \r\n        const overpassApiOptionLabel = document.createElement('label');\r\n        overpassApiOptionLabel.textContent = \"Overpass API\";\r\n        overpassApiOptionLabel.htmlFor = \"overpassApiOption\";\r\n        overpassApiOptionLabel.style.fontSize = \"18px\";\r\n        \r\n        modal.appendChild(overpassApiOption);\r\n        modal.appendChild(overpassApiOptionLabel);\r\n        modal.appendChild(document.createElement('br'));\r\n        \r\n        // select for type of suggested destinations to show\r\n        const overpassApiSelect = document.createElement('select');\r\n        overpassApiSelect.id = \"overpassApiSelect\";\r\n        overpassApiSelect.style.margin = '10px';\r\n        overpassApiSelect.disabled = !overpassApiEnabled;\r\n        [\"restaurant\", \"museum\"].forEach(type => {\r\n            const opt = document.createElement('option');\r\n            opt.value = type;\r\n            opt.textContent = type;\r\n            \r\n            if(type === selectedOverpassApiEntity){\r\n                opt.selected = true;\r\n            }\r\n            \r\n            overpassApiSelect.appendChild(opt);\r\n        });\r\n        \r\n        const overpassApiSelectLabel = document.createElement('label');\r\n        overpassApiSelectLabel.htmlFor = \"overpassApiSelect\";\r\n        overpassApiSelectLabel.textContent = \"suggested destination type: \";\r\n        overpassApiSelectLabel.style.fontSize = \"14px\";\r\n        \r\n        overpassApiOption.addEventListener('change', (evt) => {\r\n            overpassApiSelect.disabled = false;\r\n        });\r\n        \r\n        databaseOption.addEventListener('change', (evt) => {\r\n            overpassApiSelect.disabled = true;\r\n        });\r\n        \r\n        modal.appendChild(overpassApiSelectLabel);\r\n        modal.appendChild(overpassApiSelect);\r\n        \r\n        modal.appendChild(document.createElement('hr'));\r\n        \r\n        // select for type of map to display\r\n        const mapTypeSelect = document.createElement('select');\r\n        mapTypeSelect.id = \"mapTypeSelect\";\r\n        [\"watercolor\", \"terrain\", \"toner\"].forEach(type => {\r\n            const opt = document.createElement('option');\r\n            opt.value = type;\r\n            opt.textContent = type;\r\n            mapTypeSelect.appendChild(opt);\r\n        });\r\n        const mapTypeSelectLabel = document.createElement('label');\r\n        mapTypeSelectLabel.htmlFor = \"mapTypeSelect\";\r\n        mapTypeSelectLabel.textContent = \"map type: \";\r\n        mapTypeSelectLabel.style.fontSize = \"14px\";\r\n        \r\n        modal.appendChild(mapTypeSelectLabel);\r\n        modal.appendChild(mapTypeSelect);\r\n        \r\n        modal.appendChild(document.createElement('hr'));\r\n        \r\n        // ok, cancel buttons\r\n        const okBtn = document.createElement('button');\r\n        okBtn.innerText = \"ok\";\r\n        okBtn.style.marginTop = '6px';\r\n        \r\n        const cancelBtn = document.createElement('button');\r\n        cancelBtn.innerText = \"cancel\";\r\n        cancelBtn.style.marginTop = '6px';\r\n        \r\n        modal.appendChild(document.createElement('br'));\r\n        modal.appendChild(okBtn);\r\n        modal.appendChild(cancelBtn);\r\n        \r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.id = \"modal-overlay\";\r\n        Object.assign(modalOverlay.style, this.modalOverlayStyle);\r\n        \r\n        document.body.appendChild(modal);\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        return new Promise<Record<string, string>>((resolve) => {\r\n            okBtn.onclick = (): void => {\r\n                resolve({\r\n                    \"dataSource\": !overpassApiSelect.disabled ? \"overpassApi\" : \"database\",\r\n                    \"overpassApiEntity\": overpassApiSelect.value,\r\n                    \"mapType\": mapTypeSelect.value,\r\n                });\r\n            };\r\n            cancelBtn.onclick = (): void => {\r\n                resolve({});\r\n            };\r\n        }).finally((): void => {\r\n            document.body.removeChild(modal);\r\n            document.body.removeChild(modalOverlay);\r\n        });\r\n    }\r\n    \r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport Calendar from './Calendar.vue';\r\nimport { Destination } from '../utils/triproute';\r\nimport { Modal } from '../utils/modal';\r\n\r\n// get info passed from parent component (i.e. Sidebar)\r\nexport default Vue.extend({\r\n    data(){\r\n        return {\r\n            expanded: false,\r\n            isEditing: false,\r\n            editSnapshot: {},\r\n            currDestTitle: \"\"\r\n        }\r\n    },\r\n    components: {\r\n        Calendar\r\n    },\r\n    props: {\r\n        destination: {required: true, type: Object}\r\n    },\r\n    methods: {\r\n        highlightBorder: function(): void {\r\n            const name = this.destination.name;\r\n            const dest = document.getElementById(name + '_dest');\r\n            if(dest !== null){\r\n                dest.style.border = '2px solid #fff';\r\n            }\r\n        },\r\n        \r\n        dehighlightBorder: function(): void {\r\n            const name = this.destination.name;\r\n            const dest = document.getElementById(name + '_dest');\r\n            if(dest !== null){\r\n                dest.style.border = '2px solid #000';\r\n            }    \r\n        },\r\n        \r\n        toggleVisibility: function(): void {\r\n            const name = this.destination.name;\r\n            const content = document.getElementById(name + '_content');\r\n\r\n            if(content !== null){\r\n                if(this.expanded && !this.isEditing){\r\n                    content.style.display = \"none\";\r\n                }else{\r\n                    content.style.display = \"block\";\r\n                }\r\n            }\r\n\r\n            this.expanded = !this.expanded;\r\n        },\r\n        \r\n        toggleEdit: function(evt: Event): void {\r\n            // prevent div from closing\r\n            evt.stopPropagation();\r\n            \r\n            const name = this.destination.name;\r\n            \r\n            this.isEditing = true;\r\n\r\n            // take a snapshot of all current data so we can cancel changes easily\r\n            //console.log(this.destination);\r\n            this.editSnapshot = JSON.parse(JSON.stringify(this.destination));\r\n            \r\n            // make destination name editable\r\n            const destTitle = document.getElementById(name);\r\n            destTitle?.setAttribute('contenteditable', \"true\");\r\n\r\n            // save the current title so we can restore it if it can't be changed\r\n            this.currDestTitle = destTitle?.textContent || \"\";\r\n\r\n            // make content editable\r\n            const notes = document.getElementById(name + '_notes');\r\n            if(notes !== null) notes.removeAttribute('disabled');\r\n        },\r\n        \r\n        removeDestination: async function(evt: Event): Promise<void> {\r\n            // remove a destination\r\n            // calls a method of the Vue root instance\r\n            const modal = new Modal();\r\n            const remove = await modal.createQuestionModal(\"Are you sure you want to remove this destination?\");\r\n            if (remove) {\r\n                const name = (evt.target as HTMLElement).id.split(\"_\")[0]; // i.e. name_dest, and we want name\r\n\r\n                //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n                this.$root.removeDestination(name);\r\n            }\r\n        },\r\n        \r\n        saveChanges: function(): void {\r\n            // note: when save is clicked and the data is sent to the root\r\n            // to update state, the destination name, if edited, will be\r\n            // checked to make sure its new desired name is not already taken\r\n            // by another destination\r\n\r\n            const name = this.destination.name;\r\n            const destTitle = document.getElementById(name);\r\n            const newName = destTitle?.textContent?.trim();\r\n\r\n            // if new name is valid (i.e. not an empty string), the change will happen\r\n            // if it doesn't happen, we'll at least have restored the dest title to its original\r\n            if (destTitle) {\r\n                destTitle.textContent = this.currDestTitle;\r\n                destTitle.setAttribute('contenteditable', \"false\");\r\n            }\r\n\r\n            const notes = document.getElementById(name + '_notes');\r\n            notes?.setAttribute('disabled', 'true');\r\n\r\n            const data: Destination = JSON.parse(JSON.stringify(this.destination)); // make a copy\r\n            data.notes = (notes as HTMLTextAreaElement)?.value;\r\n            data.newName = newName;\r\n\r\n            // get from and to dates\r\n            //@ts-ignore (TS-2339)\r\n            const fromDate = this.$refs[name + \"_fromDate\"].getDateInfo();\r\n            //@ts-ignore (TS-2339)\r\n            const toDate = this.$refs[name + \"_toDate\"].getDateInfo();\r\n\r\n            data.fromDate = `${fromDate.month}-${fromDate.day}-${fromDate.year}`;\r\n            data.toDate = `${toDate.month}-${toDate.day}-${toDate.year}`;\r\n\r\n            // get route color and remove color wheel\r\n            const routeColorInput = document.getElementById(this.destination.name + \"_routeColor\") as HTMLInputElement;\r\n            if(routeColorInput) data.routeColor = routeColorInput.value;\r\n\r\n            const colorWheel = document.getElementById(this.destination.name + \"_colorWheel\");\r\n            if(colorWheel && colorWheel.parentNode) colorWheel.parentNode.removeChild(colorWheel);\r\n\r\n            // update data source with new info\r\n            //@ts-ignore \r\n            this.$root.updateDestination(data);\r\n\r\n            this.isEditing = false;\r\n        },\r\n        \r\n        cancelChanges: function(): void {\r\n            // make sure destination name goes back to being uneditable\r\n            const name = this.destination.name;\r\n            const destTitle = document.getElementById(name);\r\n            destTitle?.setAttribute('contenteditable', \"false\");\r\n            \r\n            const notes = document.getElementById(name + '_notes');\r\n            notes?.setAttribute('disabled', 'true');\r\n\r\n            const currData = JSON.parse(JSON.stringify(this.editSnapshot));\r\n            for(const data in currData) {\r\n                this.destination[data] = currData[data];\r\n            }\r\n            this.editSnapshot = {};\r\n            this.isEditing = false;\r\n        },\r\n        \r\n        uploadImage: function(evt: Event): void {\r\n            const img = new Image();\r\n            const reader = new FileReader();\r\n            const files = (evt.target as HTMLInputElement).files;\r\n            \r\n            if(files === null || files.length !== 1){\r\n                return;\r\n            }\r\n            \r\n            const file = files[0];\r\n\r\n            reader.onloadend = (): void => {\r\n                const imgSrcStr = reader.result as string;\r\n\r\n                img.src = imgSrcStr;\r\n\r\n                // update data\r\n                const data: Destination = JSON.parse(JSON.stringify(this.destination)); // making a copy\r\n                data.images.push(imgSrcStr);\r\n\r\n                //@ts-ignore \r\n                this.$root.updateDestination(data);\r\n            };\r\n            //read the file as a URL\r\n            reader.readAsDataURL(file);\r\n        },\r\n        \r\n        clickInput: function(): void {\r\n            const inputElement = document.getElementById(this.destination.name + \"_importImage\");\r\n            inputElement?.click();\r\n        },\r\n        \r\n        enlargeImage: function(evt: Event): void {\r\n            const imageDiv = document.createElement('div');\r\n            imageDiv.style.opacity = \"0.98\";\r\n            imageDiv.style.backgroundColor = \"#383838\";\r\n            imageDiv.style.position = \"fixed\";\r\n            imageDiv.style.top = \"0\";\r\n            imageDiv.style.left = \"0\";\r\n            imageDiv.style.height = \"100%\";\r\n            imageDiv.style.width = \"100%\";\r\n            imageDiv.style.textAlign = \"center\";\r\n            imageDiv.style.overflow = \"scroll\";\r\n\r\n            document.body.style.overflow = \"hidden\";\r\n\r\n            const enlargedImage = new Image();\r\n            enlargedImage.src = (evt.target as HTMLImageElement).src;\r\n            enlargedImage.addEventListener(\"dblclick\", () => {\r\n                imageDiv?.parentNode?.removeChild(imageDiv);\r\n                document.body.style.overflow = \"visible\";\r\n            });\r\n\r\n            if(document.body.clientHeight < enlargedImage.height ||\r\n                document.body.clientWidth < enlargedImage.width) {\r\n                // reduce size of enlarged image if larger than the page\r\n                // or rescale using a canvas?\r\n            }\r\n\r\n            imageDiv.appendChild(enlargedImage);\r\n\r\n            const cancel = document.createElement('h3');\r\n            cancel.textContent = \"close\";\r\n            cancel.style.fontFamily = \"Montserrat\";\r\n            cancel.style.fontWeight = \"bold\";\r\n            cancel.style.fontSize = \"2em\";\r\n            cancel.style.color = \"#fff\";\r\n            cancel.style.marginTop = \"1%\";\r\n            cancel.addEventListener(\"click\", () => {\r\n                imageDiv?.parentNode?.removeChild(imageDiv);\r\n                document.body.style.overflow = \"visible\";\r\n            });\r\n            imageDiv.appendChild(cancel);\r\n\r\n            document.body.appendChild(imageDiv);\r\n        },\r\n        \r\n        deleteImage: function(evt: Event): void {\r\n            // get index of image from id\r\n            const imageIndexStr = (evt.target as HTMLElement).id.split(\"_\");\r\n            const imageIndex = parseInt(imageIndexStr[imageIndexStr.length - 1]);\r\n\r\n            this.destination.images.splice(imageIndex, 1);\r\n        },\r\n        \r\n        showColorWheel: function(): void {\r\n            const location = document.getElementById(this.destination.name + '_editRouteColor');\r\n            const colorWheelId = this.destination.name + \"_colorWheel\";\r\n            \r\n            if(document.getElementById(colorWheelId)){\r\n                // don't add a new one if there already is one\r\n                return;\r\n            }\r\n            \r\n            const size = \"200\";\r\n            const colorWheel = document.createElement('canvas');\r\n            colorWheel.id = colorWheelId;\r\n            colorWheel.setAttribute('width', size);\r\n            colorWheel.setAttribute('height', size);\r\n\r\n            const colorWheelContext = colorWheel.getContext('2d');\r\n            const x = colorWheel.width / 2;\r\n            const y = colorWheel.height / 2;\r\n            const radius = 90;\r\n\r\n            // why 5600??\r\n            if(colorWheelContext) {\r\n                for(let angle = 0;angle <= 5600;angle++) {\r\n                    const startAngle = (angle - 2) * Math.PI / 180; //convert angles to radians\r\n                    const endAngle = (angle) * Math.PI / 180;\r\n                    colorWheelContext.beginPath();\r\n                    colorWheelContext.moveTo(x, y);\r\n                    //.arc(x, y, radius, startAngle, endAngle, anticlockwise)\r\n                    colorWheelContext.arc(x, y, radius, startAngle, endAngle, false);\r\n                    colorWheelContext.closePath();\r\n                    //use .createRadialGradient to get a different color for each angle\r\n                    //createRadialGradient(x0, y0, r0, x1, y1, r1)\r\n                    const gradient = colorWheelContext.createRadialGradient(x, y, 0, startAngle, endAngle, radius);\r\n                    gradient.addColorStop(0, 'hsla(' + angle + ', 10%, 100%, 1)');\r\n                    gradient.addColorStop(1, 'hsla(' + angle + ', 100%, 50%, 1)');\r\n                    colorWheelContext.fillStyle = gradient;\r\n                    colorWheelContext.fill();\r\n                }\r\n\r\n                // make black a pickable color\r\n                colorWheelContext.fillStyle = \"#000\";\r\n                colorWheelContext.beginPath();\r\n                colorWheelContext.arc(10, 10, 8, 0, 2 * Math.PI);\r\n                colorWheelContext.fill();\r\n\r\n                // make white pickable too\r\n                // black outline\r\n                colorWheelContext.beginPath();\r\n                colorWheelContext.arc(30, 10, 8, 0, 2 * Math.PI); // border around the white \r\n                colorWheelContext.stroke();\r\n\r\n                // make sure circle is filled with #fff\r\n                colorWheelContext.fillStyle = \"#fff\";\r\n                colorWheelContext.arc(30, 10, 8, 0, 2 * Math.PI);\r\n                colorWheelContext.fill();\r\n\r\n                colorWheel.addEventListener('click', (e) => {\r\n                    const x = e.offsetX;\r\n                    const y = e.offsetY;\r\n\r\n                    //@ts-ignore (2531)\r\n                    const colorPicked = (colorWheel.getContext('2d')).getImageData(x, y, 1, 1).data;\r\n                    // convert to hex?\r\n                    const colorCode = 'rgb(' + colorPicked[0] + ',' + colorPicked[1] + ',' + colorPicked[2] + ')';\r\n                    const colorInput = document.getElementById(this.destination.name + \"_routeColor\") as HTMLInputElement;\r\n                    if(colorInput) {\r\n                        colorInput.value = colorCode;\r\n                        colorInput.style.backgroundColor = colorCode;\r\n                    }\r\n                });\r\n            }\r\n\r\n            if(location) location.appendChild(colorWheel);\r\n        },\r\n        \r\n        onDragStart: function(evt: DragEvent): void {\r\n            evt.stopPropagation();\r\n            \r\n            const thisEl = evt.target as HTMLElement;\r\n            if(thisEl){\r\n                if(evt.dataTransfer){\r\n                    evt.dataTransfer.dropEffect = \"move\";\r\n                    evt.dataTransfer.effectAllowed = \"move\";\r\n                    evt.dataTransfer.setData(\"currentDraggedElementId\", thisEl.id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Destination.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Destination.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Destination.vue?vue&type=template&id=2ce103ec&scoped=true&\"\nimport script from \"./Destination.vue?vue&type=script&lang=ts&\"\nexport * from \"./Destination.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Destination.vue?vue&type=style&index=0&id=2ce103ec&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ce103ec\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport { Destination as DestinationInterface } from '../utils/triproute';\r\nimport Destination from './Destination.vue';\r\n\r\n@Component({\r\n    components: {\r\n        Destination\r\n    }\r\n})\r\n\r\nexport default class DestinationList extends Vue {\r\n\r\n    @Prop({ required: true }) public listOfDest!: Array<DestinationInterface>;\r\n    \r\n    onDrop(evt: DragEvent): void {\r\n        const thisEl = evt.target as HTMLElement;\r\n        \r\n        if(evt.dataTransfer){\r\n            const currDragElementId = evt.dataTransfer.getData(\"currentDraggedElementId\");\r\n            \r\n            // update order of destinations in the list\r\n            if(thisEl && currDragElementId !== thisEl.id){\r\n                if(evt.dataTransfer){\r\n                    const currDragName = currDragElementId.split(\"_\")[0]; // extract the destination name from the id\r\n                    const currDraggedElementIndex = this.listOfDest.findIndex(dest => dest.name === currDragName);\r\n                    const targetName = thisEl.id.split(\"_\")[0];\r\n                    const targetElementIndex = this.listOfDest.findIndex(dest => dest.name === targetName);\r\n                    this.listOfDest.splice(targetElementIndex, 0, this.listOfDest.splice(currDraggedElementIndex, 1)[0]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DestinationList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DestinationList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DestinationList.vue?vue&type=template&id=93a22686&\"\nimport script from \"./DestinationList.vue?vue&type=script&lang=ts&\"\nexport * from \"./DestinationList.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuHeader\"}},[_c('h2',[_vm._v(\" trip-planner \")]),_c('ul',[_c('li',{staticClass:\"selectOption\",attrs:{\"id\":\"createNewTrip\"},on:{\"click\":_vm.addNewTrip}},[_vm._v(\" new trip \")]),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"dropdown\"},[_c('p',{staticClass:\"dropbtn\"},[_vm._v(\" select trip \")]),_c('div',{staticClass:\"dropContent\"},_vm._l((_vm.listOfTripNames),function(tripName,index){return _c('a',{key:tripName + '_' + index,attrs:{\"href\":\"#\",\"id\":'tripIndex_' + index},on:{\"click\":_vm.selectTrip}},[_vm._v(\" \"+_vm._s(tripName)+\" \")])}),0)]),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"selectOption\",on:{\"click\":_vm.triggerImport}},[_vm._v(\" import \")]),_c('input',{attrs:{\"type\":\"file\",\"id\":\"importTripData\"},on:{\"change\":_vm.importData}}),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"selectOption\",on:{\"click\":_vm.exportData}},[_vm._v(\" export \")]),_c('li',[_vm._v(\" • \")]),_c('li',{staticClass:\"selectOption\",on:{\"click\":_vm.openOptions}},[_vm._v(\" options \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport { Modal } from \"../utils/modal\";\r\n\r\nexport default Vue.extend({\r\n    props: {\r\n        listOfTripNames: { required: true, type: Array }\r\n    },\r\n    methods: {\r\n        addNewTrip: async function(): Promise<void> {\r\n            const modalHandler = new Modal();\r\n            const newTripName = await modalHandler.createInputModal(\"please enter the name of the new trip:\");\r\n            \r\n            if(newTripName) {\r\n                (this.$root as any).addNewTrip(newTripName);\r\n            }\r\n        },\r\n        \r\n        selectTrip: function(evt: MouseEvent): void {\r\n            if(evt){\r\n                const index = parseInt((evt.target as HTMLParagraphElement).id.split(\"_\")[1]);\r\n                (this.$root as any).selectTrip(index);\r\n            }\r\n        },\r\n        \r\n        triggerImport: function(): void {\r\n            if(confirm(\"Do you want to save or export your current data first? Importing will overwrite your current trip data.\")){\r\n                const importButton = document.getElementById('importTripData');\r\n                importButton?.click();\r\n            }\r\n        },\r\n        \r\n        importData: function(evt: MouseEvent): void {\r\n            // call root to import data\r\n            (this.$root as any).importData(evt);\r\n        },\r\n        \r\n        exportData: function(): void {\r\n            // call root to download trip data\r\n            (this.$root as any).exportData();\r\n        },\r\n        \r\n        saveData: function(): void {\r\n            // TODO: save current trip data to database\r\n        },\r\n        \r\n        // update the map style\r\n        changeMapStyle(mapStyleName: string): void {\r\n            // send a custom event to the map iframe along with the mapStyleName\r\n            const updateMapEvent = new CustomEvent('changeMapStyle', {detail: mapStyleName});\r\n            const mapIframe = document.getElementById('mapContainer') as HTMLIFrameElement;\r\n\r\n            if(mapIframe !== null && mapIframe.contentDocument !== null){\r\n                mapIframe.contentDocument.dispatchEvent(updateMapEvent);\r\n            }\r\n        },\r\n        \r\n        openOptions: async function(): Promise<void> {\r\n            const modal = new Modal();\r\n            \r\n            // TODO: change Record<string, string> to a custom type + don't use any\r\n            const currOptions = (this.$root as any).getCurrentOptions();\r\n            const data: Record<string, string> = await modal.createOptionsModal(currOptions);\r\n            \r\n            if(data[\"mapType\"]) this.changeMapStyle(data[\"mapType\"]);\r\n            \r\n            this.$emit('update-options', data);\r\n        }\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Navigation.vue?vue&type=template&id=38c46b04&scoped=true&\"\nimport script from \"./Navigation.vue?vue&type=script&lang=ts&\"\nexport * from \"./Navigation.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Navigation.vue?vue&type=style&index=0&id=38c46b04&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38c46b04\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport DestinationList from './DestinationList.vue';\r\nimport Navigation from './Navigation.vue';\r\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\r\nimport { Destination } from '../utils/triproute';\r\nimport { Modal } from '../utils/modal';\r\n\r\n@Component({\r\n    components: {\r\n        DestinationList,\r\n        Navigation\r\n    }\r\n})\r\n\r\nexport default class TripRouteMap extends Vue {\r\n\r\n    @Prop({ required: true }) public listOfDest!: Array<Destination>; // the ! means 'not null'\r\n    @Prop({ required: true }) public listOfTripNames!: Array<string>;\r\n    @Prop({ required: true }) public tripName!: string;\r\n    @Prop({ required: true }) public suggestedNextDests!: Destination[];\r\n\r\n    showSuggestedNextHops = false;\r\n\r\n    @Watch('listOfDest', { deep: true })\r\n    onDestChange(newVal: Array<Destination>, _: Array<Destination>): void {\r\n        // note that we shouldn't need to care about the old value (the 2nd arg)\r\n        this.updateMap(newVal);\r\n\r\n        // whenever listOfDest changes, suggestedNextDests should too\r\n        if(this.showSuggestedNextHops){\r\n            this.updateSuggestedNextHops(this.suggestedNextDests);\r\n        }\r\n    }\r\n\r\n    @Watch('suggestedNextDests', { deep: true })\r\n    onSuggestedDestChange(): void {\r\n        if(this.showSuggestedNextHops){\r\n            this.updateSuggestedNextHops(this.suggestedNextDests);\r\n        }\r\n    }\r\n\r\n    dispatchEventToMap(eventName: string, data: Array<Destination>): void {\r\n        // send a custom event to the map iframe along with the data\r\n        const updateMapEvent = new CustomEvent(eventName, {detail: data});\r\n        const mapIframe = document.getElementById('mapContainer') as HTMLIFrameElement;\r\n\r\n        if(mapIframe !== null && mapIframe.contentDocument !== null){\r\n            //console.log(\"sending data to the iframe for event: \" + eventName);\r\n            mapIframe.contentDocument.dispatchEvent(updateMapEvent);\r\n        }\r\n    }\r\n    \r\n    // update any option value changes from the Navigation component\r\n    // TODO: don't use any and make Record<string, string> more specific\r\n    handleUpdateOptions(value: Record<string, string>): void {\r\n        if(value.dataSource === \"overpassApi\"){\r\n            //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n            this.$root.setOverpassApiUse(true, value.overpassApiEntity); // update useOverpassAPI in root\r\n        }else{\r\n            //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n            this.$root.setOverpassApiUse(false);\r\n        }\r\n    }\r\n    \r\n    updateMap(data: Array<Destination>): void {\r\n        // take new destination data and update the MapBox map markers as needed\r\n        //console.log(\"I'm supposed to update the map!\");\r\n        this.dispatchEventToMap('updateMap', data);\r\n    }\r\n\r\n    updateSuggestedNextHops(data: Array<Destination>): void {\r\n        this.dispatchEventToMap('updateSuggestedNextHops', data);\r\n    }\r\n\r\n    toggleTripSuggestions(): void {\r\n        this.showSuggestedNextHops = !this.showSuggestedNextHops;\r\n\r\n        // make sure map reflects new value\r\n        if(!this.showSuggestedNextHops){\r\n            this.updateSuggestedNextHops([]);\r\n        } else {\r\n            this.updateSuggestedNextHops(this.suggestedNextDests);\r\n        }\r\n    }\r\n    \r\n    // TODO: not completely implemented but this is for changing a trip name\r\n    async toggleTripTitleEdit(evt: Event): Promise<void> {\r\n        const el = evt.target as HTMLElement;\r\n        \r\n        if(el === null) return;\r\n        \r\n        if(el.classList.contains(\"tripTitle\")){\r\n            el.setAttribute(\"contenteditable\", \"true\");\r\n        }else{\r\n            // check if we should edit the trip title. if the current text is of another\r\n            // trip that already exists, don't allow it and reset the text\r\n            // otherwise, update\r\n            const trip = document.querySelector(\".tripTitle\"); // there should only be one trip shown at a time\r\n            \r\n            if(trip){\r\n                const editedTripName = trip.textContent ? trip.textContent.trim() : \"\";\r\n                if(editedTripName !== this.tripName && this.listOfTripNames.includes(editedTripName)){\r\n                    trip.textContent = this.tripName;\r\n                }else{\r\n                    //@ts-ignore TODO: can we fix this without ignoring? (TS-2339)\r\n                    this.$root.updateTripName(editedTripName);\r\n                }\r\n                trip.setAttribute(\"contenteditable\", \"false\");\r\n            }\r\n        }\r\n    }\r\n    \r\n    _handleIframeLogs(evt: Event): void {\r\n        console.log(evt);\r\n    }\r\n    \r\n    _handleReady(): void {\r\n        console.log(\"got iframe ready message!!\");\r\n        this.updateMap(this.listOfDest);\r\n\r\n        // this is false by default so not sure yet when this will ever happen\r\n        if(this.showSuggestedNextHops){\r\n            this.updateSuggestedNextHops(this.suggestedNextDests);\r\n        }\r\n    }\r\n    \r\n    mounted(): void {\r\n        // the iframe might not be ready?\r\n        // so listen for the ready event first\r\n        window.document.addEventListener('imready', this._handleReady, false);        \r\n        \r\n        // set up listeners for any messages that come from the iframe\r\n        window.document.addEventListener('iframeLogs', this._handleIframeLogs, false);\r\n        \r\n        // allow user to stop the trip title from being editable when clicking elsewhere other than the title text\r\n        window.document.addEventListener('click', this.toggleTripTitleEdit);\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripRoute.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripRoute.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TripRoute.vue?vue&type=template&id=2dc0cdd4&\"\nimport script from \"./TripRoute.vue?vue&type=script&lang=ts&\"\nexport * from \"./TripRoute.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TripRoute.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\nimport { Destination } from './utils/triproute';\r\nimport TripRouteMap from './components/TripRoute.vue';\r\n\r\n@Component({\r\n    components: {\r\n        TripRouteMap\r\n    }\r\n})\r\n\r\nexport default class App extends Vue {\r\n    @Prop({ required: true }) public listOfDest!: Array<Record<string, Destination>>;\r\n    @Prop({ required: true }) public tripName!: string;\r\n    @Prop({ required: true }) public listOfTripNames!: Array<string>;\r\n    @Prop({ required: true }) public suggestedNextDests!: Destination[];\r\n}\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=d2a45b30&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue, {CreateElement, VNode} from 'vue'\r\nimport App from './App.vue'\r\nimport axios from 'axios';\r\nimport { Modal } from './utils/modal';\r\nimport { Destination, DestinationSuggestion, Trip } from './utils/triproute';\r\n\r\nVue.config.productionTip = false\r\n\r\n// root instance\r\nnew Vue({\r\n    render(h: CreateElement): VNode {\r\n        // TODO: fetch user's tripdata from db here??\r\n        return h(App, {\r\n            props: {\r\n                'listOfDest': this.tripData[this.currTripIndex].listOfDest,\r\n                'tripName': this.tripData[this.currTripIndex].tripName,\r\n                'listOfTripNames': this.tripData.map(trip => trip.tripName),\r\n                'suggestedNextDests': this.suggestedNextDests, // should be based on last destination in listOfDest\r\n            }\r\n        });\r\n    },\r\n    data: {\r\n        'tripData': [\r\n            {\r\n                'tripName': 'my first trip',\r\n                'listOfDest': [\r\n                    {\r\n                        \"name\": \"test\",\r\n                        \"latitude\": 38.9486650738765,\r\n                        \"longitude\": -77.01459411621002,\r\n                        \"notes\": \"hello world\",\r\n                        \"fromDate\": \"01-01-2020\",\r\n                        \"toDate\": \"01-05-2020\",\r\n                        \"images\": [] as string[],\r\n                        \"routeColor\": \"#888\"\r\n                    },\r\n                    {\r\n                        \"name\": \"test2\",\r\n                        \"latitude\": 38.982833520960156,\r\n                        \"longitude\": -76.95210937499908,\r\n                        \"notes\": \"hello world2\",\r\n                        \"fromDate\": \"01-05-2020\",\r\n                        \"toDate\": \"01-07-2020\",\r\n                        \"images\": [] as string[],\r\n                        \"routeColor\": \"#888\"\r\n                    }\r\n                ]\r\n            }\r\n        ],\r\n        'username': 'user1',\r\n        'currTripIndex': 0,\r\n        'suggestedNextDests': [] as DestinationSuggestion[],\r\n        'canGetSuggestedNextDests': false, // can get destinations from the database\r\n        'useOverpassAPI': false,            // flag for using overpass api for getting nearby locations\r\n        'overpassApiEntityToFind': \"restaurant\",\r\n        'overpassApiKeyToFind': \"amenity\",\r\n        'fakeSuggestions': [\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place1\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 39.002833520960156,\r\n                \"longitude\": -76.55210937499908,\r\n                \"index\": 0,\r\n                \"metadata\": {\r\n                    \"notes\": \"hello world2 sdfsdf\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place2\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 39.048987979347004,\r\n                \"longitude\": -76.91640380859292,\r\n                \"index\": 1,\r\n                \"metadata\": {\r\n                    \"notes\": \"hello world2 sdfsdf sdfgsdfg\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place3\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 38.848987979347004,\r\n                \"longitude\": -77.01640380859292,\r\n                \"index\": 2,\r\n                \"metadata\": {\r\n                    \"notes\": \"hello world2 sdfsdf sdfgsdfg\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n            {\r\n                \"username\": \"test_user1\",\r\n                \"destname\": \"test_place4\",\r\n                \"tripname\": \"test_trip1\",\t\r\n                \"latitude\": 37.948987979347004,\r\n                \"longitude\": -77.01640380859292,\r\n                \"index\": 3,\r\n                \"metadata\": {\r\n                    \"notes\": \"something\",\r\n                    \"fromDate\": \"01-05-2020\",\r\n                    \"toDate\": \"01-07-2020\",\r\n                    \"images\": [],\r\n                    \"routeColor\": \"#888\"\r\n                }\r\n            },\r\n        ],\r\n    },\r\n    methods: {\r\n        requestSuggestedNextHops: function(lat: number, long: number): Promise<DestinationSuggestion[]> {\r\n            //console.log(\"requesting next hop suggestions\");\r\n            return new Promise((resolve) => {\r\n                // should be based on last destination in list\r\n                // use 20 km radius for now\r\n                axios.get(`http://localhost:8081/api/destinations?username=${this.username}&latitude=${lat}&longitude=${long}&radius=${20}`)\r\n                    .then(res => {\r\n                        const suggestedNextDestinations: DestinationSuggestion[] = (res as any).data.destinations;\r\n                        resolve(suggestedNextDestinations);\r\n                    })\r\n                    .catch(error => {\r\n                        resolve([]); // database could not be connected to\r\n                    });\r\n            });\r\n        },\r\n        \r\n        findDestination: function(destName: string): boolean {\r\n            const listOfDest = this.tripData[this.currTripIndex].listOfDest;\r\n            for (const dest of listOfDest) {\r\n                if (dest.name === destName) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        \r\n        removeDestination: function(destName: string): void {\r\n            const currDests = this.tripData[this.currTripIndex].listOfDest;\r\n            this.tripData[this.currTripIndex].listOfDest = currDests.filter(dest => dest.name !== destName);\r\n\t\t\t\r\n            // TODO: check to see if the last destination of the list was removed and if there is a new last destination. \r\n            // if so, take the current last dest and show next hop suggestions for that dest (if show next hops option selected)\r\n            // right now just handle when demoing\r\n            if(!this.canGetSuggestedNextDests){\r\n                this.suggestedNextDests = this.getFakeSuggestions();\r\n            }\r\n        },\r\n        \r\n        updateDestination: function(data: Destination): void {\r\n            // called from Destination.vue\r\n            // TODO: is there a better way to do this update?\r\n            const listOfDest = this.tripData[this.currTripIndex].listOfDest;\r\n            const currName = data.name;\r\n            let changeName = false;\r\n            let newName = \"\";\r\n\r\n            if(data.newName){\r\n                newName = data.newName; // new desired destination name\r\n\r\n                //@ts-ignore TODO: investigate this? (TS-2339)\r\n                const destWithNewNameExists = this.findDestination(newName);\r\n\r\n                if(currName !== newName && !destWithNewNameExists){\r\n                    changeName = true;\r\n                }else if(currName !== newName && destWithNewNameExists){\r\n                    // a destination with the new name already exists\r\n                    // just don't update the destination name but alert the user\r\n                    alert(\"Can't change name because a destination already exists with the same name!\");\r\n                }\r\n            }\r\n\r\n            for(let i = 0; i < listOfDest.length; i++){\r\n                const dest = listOfDest[i];\r\n                if(dest.name === currName){\r\n                    // TODO: just do for prop in dest, reassign?\r\n                    // so we don't have to manually update this each time there's a new prop\r\n                    dest.notes = data.notes;\r\n                    dest.fromDate = data.fromDate;\r\n                    dest.toDate = data.toDate;\r\n                    dest.images = data.images;\r\n                    dest.routeColor = data.routeColor;\r\n\r\n                    if(changeName){\r\n                        dest.name = newName;\r\n                    }else{\r\n                        dest.name = currName;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        \r\n        updateTripName: function(name: string): void {\r\n            if(!this.tripData.some((x: Trip) => x.tripName === name)){\r\n                // no other trip exists with this name so we can update\r\n                const currTrip = this.tripData[this.currTripIndex];\r\n                currTrip.tripName = name;\r\n                console.log(\"trip name updated\");\r\n            }\r\n        },\r\n        \r\n        addNewTrip: function(name: string): void {\r\n            // TODO: check for existing trip name? allow duplicate names?\r\n            const newTrip = {\r\n                tripName: name,\r\n                listOfDest: []\r\n            };\r\n            this.tripData.push(newTrip);\r\n            this.currTripIndex = this.tripData.length - 1;\r\n        },\r\n        \r\n        selectTrip: function(tripIndex: number): void {\r\n            this.currTripIndex = tripIndex;\r\n        },\r\n\t\t\r\n        importData: function(evt: Event): void {\r\n            const reader = new FileReader();\r\n            const files = (evt.target as HTMLInputElement).files;\r\n            \r\n            if(files === null || files.length !== 1){\r\n                return;\r\n            }\r\n            \r\n            const file = files[0];\r\n            \r\n            if(file){\r\n                reader.onload = (() => {\r\n                    return (evt: Event): void => {\r\n                        const data: Array<Trip> = JSON.parse(reader.result as string); // should be a list of trips\r\n                        \r\n                        data.forEach(trip => {\r\n                            if(!trip.tripName || !trip.listOfDest){\r\n                                alert(\"sorry, trip data could not be imported! tripName and listOfDest fields must be provided for each trip.\");\r\n                                return;\r\n                            }\r\n                        });\r\n                        \r\n                        this.tripData = data;\r\n                        this.currTripIndex = 0;\r\n                    }\r\n                })();\r\n                \r\n                reader.readAsText(file);\r\n            }\r\n        },\r\n\t\t\r\n        exportData: async function(): Promise<void> {\r\n            const data = JSON.parse(JSON.stringify(this.tripData)); // make a copy\r\n            for(const trip of data) {\r\n                for(const dest of trip.listOfDest) {\r\n                    dest.images = []; // don't export images...for now?\r\n                }\r\n            }\r\n            const jsonData = JSON.stringify(data, null, 4);\r\n            const blob = new Blob([jsonData], { type: \"application/json\" });\r\n            const url = URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            \r\n            const modal = new Modal();\r\n            const filename = await modal.createInputModal(\"What would you like to name the exported file?\");\r\n\t\t\t\r\n            if(filename){\r\n                link.download = filename ? `${filename}.json` : \"trip-planner-data.json\";\r\n                link.click();\r\n            }\r\n        },\r\n        \r\n        // TODO: figure out the correct typing for fakeSuggestions elements and don't use any. they aren't Destination... \r\n        getFakeSuggestions: function(): Array<DestinationSuggestion> {\r\n            // filter based on proximity (this is just for when using fake data. the database is supposed to\r\n            // handle finding the closest destinations)\r\n            const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n            if(currTripDestList.length){\r\n                const lat = (currTripDestList[currTripDestList.length-1].latitude * Math.PI) / 180;\r\n                const lng = (currTripDestList[currTripDestList.length-1].longitude * Math.PI) / 180;\r\n                \r\n                const newSuggestions = this.fakeSuggestions.filter((x: DestinationSuggestion) => {\r\n                    const lngRad = (x.longitude * Math.PI) / 180;\r\n                    const latRad = (x.latitude * Math.PI) / 180;\r\n                    return Math.acos(Math.sin(lat) * Math.sin(latRad) + Math.cos(lat) * Math.cos(latRad) * Math.cos(lng - lngRad)) * 6371 <= 20;\r\n                });\r\n                \r\n                return newSuggestions;\r\n            }else{\r\n                return [];\r\n            }\r\n        },\r\n        \r\n        // TODO: fix up so that return value is like Promise<DestinationSuggestion[]>?\r\n        // keyType is like 'amenity' or 'tourism'\r\n        // entity is like 'restaurant' or 'museum'\r\n        getLocationsFromOverpass: function(lat: number, long: number, keyType: string, entity: string): Promise<any> {\r\n            // find 5 museums in a 20000 meter radius at lat, long\r\n            const url = \"http://overpass-api.de/api/interpreter\";\r\n            const query = `%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A(%0Anode%5B%22${keyType}%22%3D%22${entity}%22%5D(around%3A20000%2C${lat}%2C+${long})%3B%0A)%3B%0Aout+body+5%3B%0A%3E%3B%0Aout+skel+qt%3B`;\r\n            const config = {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n                }\r\n            };\r\n            \r\n            function getResults(response: any): Array<any> {\r\n                const elements = response.data.elements;\r\n                return elements.map((el: any) => {\r\n                    return {\r\n                        'latitude': el.lat,\r\n                        'longitude': el.lon,\r\n                        'destname': el.tags.name,\r\n                        'type': el.tags.tourism\r\n                    };\r\n                });\r\n            }\r\n            \r\n            return new Promise((resolve) => {\r\n                axios.post(url, `data=${query}`, config).then((response) => {\r\n                    //console.log(getResults(response));\r\n                    resolve(getResults(response));\r\n                });\r\n            });\r\n        },\r\n        \r\n        getSuggestionsFromOverpass: function(keyType: string, entity: string): Promise<any> {\r\n            const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n            return this.getLocationsFromOverpass(\r\n                currTripDestList[currTripDestList.length-1].latitude,\r\n                currTripDestList[currTripDestList.length-1].longitude,\r\n                keyType,\r\n                entity\r\n            );\r\n        },\r\n        \r\n        setOverpassApiUse: function(val: boolean, entity: string): void {\r\n            this.useOverpassAPI = val;\r\n            if(val){\r\n                const overpassApiEntityKeyMap: Record<string, string> = {\r\n                    \"restaurant\": \"amenity\",\r\n                    \"museum\": \"tourism\",\r\n                };\r\n                if(entity){\r\n                    this.overpassApiEntityToFind = entity;\r\n                    this.overpassApiKeyToFind = overpassApiEntityKeyMap[entity];\r\n                    \r\n                    this.getSuggestionsFromOverpass(this.overpassApiKeyToFind, this.overpassApiEntityToFind).then((data) => {\r\n                        this.suggestedNextDests = data;\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        \r\n        getCurrentOptions: function(): Record<string, any> {\r\n            return {\r\n                useOverpassAPI: this.useOverpassAPI,\r\n                selectedOverpassApiEntity: this.overpassApiEntityToFind,\r\n            };\r\n        }\r\n    },\r\n\t\r\n    mounted: function(): void {\r\n        // listen for the custom event 'addDest' from the iframe (which is the map)\r\n        // every time we add a new destination and the user wants next destination suggestions,\r\n        // we make a call to the API server to fetch those suggestions.\r\n        document.addEventListener('addDest', (evt) => {\r\n            // if adding a new destination was successful to the iframe map, a custom addDest event will be\r\n            // emitted from the iframe along with that new destination's data, which gets received here.\r\n            const location = (evt as CustomEvent).detail;\r\n\r\n            if(location) {\r\n                const newDest: Destination = {\r\n                    name: location.name,\r\n                    latitude: location.latitude,\r\n                    longitude: location.longitude,\r\n                    toDate: \"\",\r\n                    fromDate: \"\",\r\n                    notes: \"\",\r\n                    images: [],\r\n                    routeColor: \"#888\"\r\n                };\r\n\t\t\t\t\r\n                if(this.canGetSuggestedNextDests && !this.useOverpassAPI){\r\n                    // Make a call to the db with the newly added dest's lat and lng to look up possible next hops\r\n                    // when we get that info back, update the prop so the change will get propagated to TripRoute.vue.\r\n                    \r\n                    // TODO: setting data to type Destination results in:\r\n                    // Type 'Destination' is missing the following properties from type 'never[]': length, pop, push, concat, and 28 more.\r\n                    this.requestSuggestedNextHops(location.latitude, location.longitude).then((data: any) => {\r\n                        this.suggestedNextDests = data;\r\n                        this.tripData[this.currTripIndex].listOfDest.push(newDest);\r\n                    });\t\t\t\t\t\r\n                }else{\r\n                    // for demoing\r\n                    this.tripData[this.currTripIndex].listOfDest.push(newDest);\r\n                    \r\n                    if(this.useOverpassAPI){\r\n                        //@ts-ignore TODO: investigate this? (TS-2339)\r\n                        this.getSuggestionsFromOverpass(this.overpassApiKeyToFind, this.overpassApiEntityToFind).then((data) => {\r\n                            this.suggestedNextDests = data;\r\n                        });\r\n                    }else{\r\n                        //@ts-ignore TODO: investigate this? (TS-2339)\r\n                        this.suggestedNextDests = this.getFakeSuggestions();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // make a call for all the trip info for this user\r\n        // for now use 'user1' as the username to demo\r\n        axios.get(`http://localhost:8081/api/user-destinations/${this.username}`)\r\n            .then(res => {\r\n                this.tripData = res.data.trips;      // get user's trips\r\n                this.canGetSuggestedNextDests = true; // since we can connect to the database\r\n            \r\n                // get suggested next hops using the currently last destination in the current trip\r\n                const currTripDestList: Array<Destination> = this.tripData[this.currTripIndex].listOfDest;\r\n                const lat = currTripDestList[currTripDestList.length-1].latitude;\r\n                const lng = currTripDestList[currTripDestList.length-1].longitude;\r\n            \r\n                this.requestSuggestedNextHops(lat, lng).then((data: any) => {\r\n                    this.suggestedNextDests = data;\r\n                });\r\n            })\r\n            .catch(error => {\r\n                // database couldn't be connected to\r\n                // we can't get suggested next hops when a new destination is added\r\n                // use fake data instead for now\r\n                \r\n                if(this.useOverpassAPI){\r\n                    this.getSuggestionsFromOverpass(this.overpassApiKeyToFind, this.overpassApiEntityToFind).then((data) => {\r\n                        this.suggestedNextDests = data;\r\n                    });\r\n                }else{\r\n                    this.suggestedNextDests = this.getFakeSuggestions();\r\n                }\r\n            });\r\n    }\r\n}).$mount('#app') // #app is in /public/index.html\r\n"],"sourceRoot":""}